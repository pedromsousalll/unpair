{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":75,"index":75}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"useDraggableCollectionState\", {\n    enumerable: true,\n    get: function () {\n      return $b45bbbaf0c3785df$export$29efd034f1d79f81;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  /*\n   * Copyright 2020 Adobe. All rights reserved.\n   * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License. You may obtain a copy\n   * of the License at http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software distributed under\n   * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n   * OF ANY KIND, either express or implied. See the License for the specific language\n   * governing permissions and limitations under the License.\n   */\n  function $b45bbbaf0c3785df$export$29efd034f1d79f81(props) {\n    let {\n      getItems: getItems,\n      isDisabled: isDisabled,\n      collection: collection,\n      selectionManager: selectionManager,\n      onDragStart: onDragStart,\n      onDragMove: onDragMove,\n      onDragEnd: onDragEnd,\n      preview: preview,\n      getAllowedDropOperations: getAllowedDropOperations\n    } = props;\n    let [, setDragging] = (0, _react.useState)(false);\n    let draggingKeys = (0, _react.useRef)(new Set());\n    let draggedKey = (0, _react.useRef)(null);\n    let getKeys = key => {\n      // The clicked item is always added to the drag. If it is selected, then all of the\n      // other selected items are also dragged. If it is not selected, then only the clicked\n      // item is dragged. This matches native macOS behavior.\n      // Additionally, we filter out any keys that are children of any of the other selected keys\n      let keys = new Set();\n      if (selectionManager.isSelected(key)) for (let currentKey of selectionManager.selectedKeys) {\n        let node = collection.getItem(currentKey);\n        if (node) {\n          let isChild = false;\n          let parentKey = node.parentKey;\n          while (parentKey != null) {\n            // eslint-disable-next-line max-depth\n            if (selectionManager.selectedKeys.has(parentKey)) {\n              isChild = true;\n              break;\n            }\n            let parentNode = collection.getItem(parentKey);\n            parentKey = parentNode ? parentNode.parentKey : null;\n          }\n          if (!isChild) keys.add(currentKey);\n        }\n      } else keys.add(key);\n      return keys;\n    };\n    return {\n      collection: collection,\n      selectionManager: selectionManager,\n      get draggedKey() {\n        return draggedKey.current;\n      },\n      get draggingKeys() {\n        return draggingKeys.current;\n      },\n      isDragging(key) {\n        return draggingKeys.current.has(key);\n      },\n      getKeysForDrag: getKeys,\n      getItems(key) {\n        let keys = getKeys(key);\n        let items = [];\n        for (let key of keys) {\n          var _collection_getItem;\n          let value = (_collection_getItem = collection.getItem(key)) === null || _collection_getItem === void 0 ? void 0 : _collection_getItem.value;\n          if (value != null) items.push(value);\n        }\n        return getItems(getKeys(key), items);\n      },\n      isDisabled: isDisabled,\n      preview: preview,\n      getAllowedDropOperations: getAllowedDropOperations,\n      startDrag(key, event) {\n        let keys = getKeys(key);\n        draggingKeys.current = keys;\n        draggedKey.current = key;\n        selectionManager.setFocused(false);\n        setDragging(true);\n        if (typeof onDragStart === 'function') onDragStart({\n          ...event,\n          keys: keys\n        });\n      },\n      moveDrag(event) {\n        if (typeof onDragMove === 'function') onDragMove({\n          ...event,\n          keys: draggingKeys.current\n        });\n      },\n      endDrag(event) {\n        let {\n          isInternal: isInternal\n        } = event;\n        if (typeof onDragEnd === 'function') onDragEnd({\n          ...event,\n          keys: draggingKeys.current,\n          isInternal: isInternal\n        });\n        draggingKeys.current = new Set();\n        draggedKey.current = null;\n        setDragging(false);\n      }\n    };\n  }\n});","lineCount":123,"map":[[7,2,103,0,"Object"],[7,8,103,0],[7,9,103,0,"defineProperty"],[7,23,103,0],[7,24,103,0,"exports"],[7,31,103,0],[8,4,103,0,"enumerable"],[8,14,103,0],[9,4,103,0,"get"],[9,7,103,0],[9,18,103,0,"get"],[9,19,103,0],[10,6,103,0],[10,13,103,8,"$b45bbbaf0c3785df$export$29efd034f1d79f81"],[10,54,103,49],[11,4,103,49],[12,2,103,49],[13,2,1,0],[13,6,1,0,"_react"],[13,12,1,0],[13,15,1,0,"require"],[13,22,1,0],[13,23,1,0,"_dependencyMap"],[13,37,1,0],[14,2,3,0],[15,0,4,0],[16,0,5,0],[17,0,6,0],[18,0,7,0],[19,0,8,0],[20,0,9,0],[21,0,10,0],[22,0,11,0],[23,0,12,0],[24,0,13,0],[25,2,14,0],[25,11,14,9,"$b45bbbaf0c3785df$export$29efd034f1d79f81"],[25,52,14,50,"$b45bbbaf0c3785df$export$29efd034f1d79f81"],[25,53,14,51,"props"],[25,58,14,56],[25,60,14,58],[26,4,15,4],[26,8,15,8],[27,6,15,10,"getItems"],[27,14,15,18],[27,16,15,20,"getItems"],[27,24,15,28],[28,6,15,30,"isDisabled"],[28,16,15,40],[28,18,15,42,"isDisabled"],[28,28,15,52],[29,6,15,54,"collection"],[29,16,15,64],[29,18,15,66,"collection"],[29,28,15,76],[30,6,15,78,"selectionManager"],[30,22,15,94],[30,24,15,96,"selectionManager"],[30,40,15,112],[31,6,15,114,"onDragStart"],[31,17,15,125],[31,19,15,127,"onDragStart"],[31,30,15,138],[32,6,15,140,"onDragMove"],[32,16,15,150],[32,18,15,152,"onDragMove"],[32,28,15,162],[33,6,15,164,"onDragEnd"],[33,15,15,173],[33,17,15,175,"onDragEnd"],[33,26,15,184],[34,6,15,186,"preview"],[34,13,15,193],[34,15,15,195,"preview"],[34,22,15,202],[35,6,15,204,"getAllowedDropOperations"],[35,30,15,228],[35,32,15,230,"getAllowedDropOperations"],[36,4,15,255],[36,5,15,256],[36,8,15,259,"props"],[36,13,15,264],[37,4,16,4],[37,8,16,8],[37,11,16,11,"setDragging"],[37,22,16,22],[37,23,16,23],[37,26,16,26],[37,27,16,27],[37,28,16,28],[37,30,16,30,"$8rdZD$useState"],[37,36,16,45],[37,37,16,45,"useState"],[37,45,16,45],[37,47,16,47],[37,52,16,52],[37,53,16,53],[38,4,17,4],[38,8,17,8,"draggingKeys"],[38,20,17,20],[38,23,17,23],[38,24,17,24],[38,25,17,25],[38,27,17,27,"$8rdZD$useRef"],[38,33,17,40],[38,34,17,40,"useRef"],[38,40,17,40],[38,42,17,42],[38,46,17,46,"Set"],[38,49,17,49],[38,50,17,50],[38,51,17,51],[38,52,17,52],[39,4,18,4],[39,8,18,8,"draggedKey"],[39,18,18,18],[39,21,18,21],[39,22,18,22],[39,23,18,23],[39,25,18,25,"$8rdZD$useRef"],[39,31,18,38],[39,32,18,38,"useRef"],[39,38,18,38],[39,40,18,40],[39,44,18,44],[39,45,18,45],[40,4,19,4],[40,8,19,8,"getKeys"],[40,15,19,15],[40,18,19,19,"key"],[40,21,19,22],[40,25,19,25],[41,6,20,8],[42,6,21,8],[43,6,22,8],[44,6,23,8],[45,6,24,8],[45,10,24,12,"keys"],[45,14,24,16],[45,17,24,19],[45,21,24,23,"Set"],[45,24,24,26],[45,25,24,27],[45,26,24,28],[46,6,25,8],[46,10,25,12,"selectionManager"],[46,26,25,28],[46,27,25,29,"isSelected"],[46,37,25,39],[46,38,25,40,"key"],[46,41,25,43],[46,42,25,44],[46,44,25,46],[46,49,25,51],[46,53,25,55,"currentKey"],[46,63,25,65],[46,67,25,69,"selectionManager"],[46,83,25,85],[46,84,25,86,"selectedKeys"],[46,96,25,98],[46,98,25,99],[47,8,26,12],[47,12,26,16,"node"],[47,16,26,20],[47,19,26,23,"collection"],[47,29,26,33],[47,30,26,34,"getItem"],[47,37,26,41],[47,38,26,42,"currentKey"],[47,48,26,52],[47,49,26,53],[48,8,27,12],[48,12,27,16,"node"],[48,16,27,20],[48,18,27,22],[49,10,28,16],[49,14,28,20,"isChild"],[49,21,28,27],[49,24,28,30],[49,29,28,35],[50,10,29,16],[50,14,29,20,"parentKey"],[50,23,29,29],[50,26,29,32,"node"],[50,30,29,36],[50,31,29,37,"parentKey"],[50,40,29,46],[51,10,30,16],[51,17,30,22,"parentKey"],[51,26,30,31],[51,30,30,35],[51,34,30,39],[51,36,30,40],[52,12,31,20],[53,12,32,20],[53,16,32,24,"selectionManager"],[53,32,32,40],[53,33,32,41,"selectedKeys"],[53,45,32,53],[53,46,32,54,"has"],[53,49,32,57],[53,50,32,58,"parentKey"],[53,59,32,67],[53,60,32,68],[53,62,32,70],[54,14,33,24,"isChild"],[54,21,33,31],[54,24,33,34],[54,28,33,38],[55,14,34,24],[56,12,35,20],[57,12,36,20],[57,16,36,24,"parentNode"],[57,26,36,34],[57,29,36,37,"collection"],[57,39,36,47],[57,40,36,48,"getItem"],[57,47,36,55],[57,48,36,56,"parentKey"],[57,57,36,65],[57,58,36,66],[58,12,37,20,"parentKey"],[58,21,37,29],[58,24,37,32,"parentNode"],[58,34,37,42],[58,37,37,45,"parentNode"],[58,47,37,55],[58,48,37,56,"parentKey"],[58,57,37,65],[58,60,37,68],[58,64,37,72],[59,10,38,16],[60,10,39,16],[60,14,39,20],[60,15,39,21,"isChild"],[60,22,39,28],[60,24,39,30,"keys"],[60,28,39,34],[60,29,39,35,"add"],[60,32,39,38],[60,33,39,39,"currentKey"],[60,43,39,49],[60,44,39,50],[61,8,40,12],[62,6,41,8],[62,7,41,9],[62,13,42,13,"keys"],[62,17,42,17],[62,18,42,18,"add"],[62,21,42,21],[62,22,42,22,"key"],[62,25,42,25],[62,26,42,26],[63,6,43,8],[63,13,43,15,"keys"],[63,17,43,19],[64,4,44,4],[64,5,44,5],[65,4,45,4],[65,11,45,11],[66,6,46,8,"collection"],[66,16,46,18],[66,18,46,20,"collection"],[66,28,46,30],[67,6,47,8,"selectionManager"],[67,22,47,24],[67,24,47,26,"selectionManager"],[67,40,47,42],[68,6,48,8],[68,10,48,12,"draggedKey"],[68,20,48,22,"draggedKey"],[68,21,48,22],[68,23,48,26],[69,8,49,12],[69,15,49,19,"draggedKey"],[69,25,49,29],[69,26,49,30,"current"],[69,33,49,37],[70,6,50,8],[70,7,50,9],[71,6,51,8],[71,10,51,12,"draggingKeys"],[71,22,51,24,"draggingKeys"],[71,23,51,24],[71,25,51,28],[72,8,52,12],[72,15,52,19,"draggingKeys"],[72,27,52,31],[72,28,52,32,"current"],[72,35,52,39],[73,6,53,8],[73,7,53,9],[74,6,54,8,"isDragging"],[74,16,54,18,"isDragging"],[74,17,54,20,"key"],[74,20,54,23],[74,22,54,25],[75,8,55,12],[75,15,55,19,"draggingKeys"],[75,27,55,31],[75,28,55,32,"current"],[75,35,55,39],[75,36,55,40,"has"],[75,39,55,43],[75,40,55,44,"key"],[75,43,55,47],[75,44,55,48],[76,6,56,8],[76,7,56,9],[77,6,57,8,"getKeysForDrag"],[77,20,57,22],[77,22,57,24,"getKeys"],[77,29,57,31],[78,6,58,8,"getItems"],[78,14,58,16,"getItems"],[78,15,58,18,"key"],[78,18,58,21],[78,20,58,23],[79,8,59,12],[79,12,59,16,"keys"],[79,16,59,20],[79,19,59,23,"getKeys"],[79,26,59,30],[79,27,59,31,"key"],[79,30,59,34],[79,31,59,35],[80,8,60,12],[80,12,60,16,"items"],[80,17,60,21],[80,20,60,24],[80,22,60,26],[81,8,61,12],[81,13,61,17],[81,17,61,21,"key"],[81,20,61,24],[81,24,61,28,"keys"],[81,28,61,32],[81,30,61,33],[82,10,62,16],[82,14,62,20,"_collection_getItem"],[82,33,62,39],[83,10,63,16],[83,14,63,20,"value"],[83,19,63,25],[83,22,63,28],[83,23,63,29,"_collection_getItem"],[83,42,63,48],[83,45,63,51,"collection"],[83,55,63,61],[83,56,63,62,"getItem"],[83,63,63,69],[83,64,63,70,"key"],[83,67,63,73],[83,68,63,74],[83,74,63,80],[83,78,63,84],[83,82,63,88,"_collection_getItem"],[83,101,63,107],[83,106,63,112],[83,111,63,117],[83,112,63,118],[83,115,63,121],[83,120,63,126],[83,121,63,127],[83,124,63,130,"_collection_getItem"],[83,143,63,149],[83,144,63,150,"value"],[83,149,63,155],[84,10,64,16],[84,14,64,20,"value"],[84,19,64,25],[84,23,64,29],[84,27,64,33],[84,29,64,35,"items"],[84,34,64,40],[84,35,64,41,"push"],[84,39,64,45],[84,40,64,46,"value"],[84,45,64,51],[84,46,64,52],[85,8,65,12],[86,8,66,12],[86,15,66,19,"getItems"],[86,23,66,27],[86,24,66,28,"getKeys"],[86,31,66,35],[86,32,66,36,"key"],[86,35,66,39],[86,36,66,40],[86,38,66,42,"items"],[86,43,66,47],[86,44,66,48],[87,6,67,8],[87,7,67,9],[88,6,68,8,"isDisabled"],[88,16,68,18],[88,18,68,20,"isDisabled"],[88,28,68,30],[89,6,69,8,"preview"],[89,13,69,15],[89,15,69,17,"preview"],[89,22,69,24],[90,6,70,8,"getAllowedDropOperations"],[90,30,70,32],[90,32,70,34,"getAllowedDropOperations"],[90,56,70,58],[91,6,71,8,"startDrag"],[91,15,71,17,"startDrag"],[91,16,71,19,"key"],[91,19,71,22],[91,21,71,24,"event"],[91,26,71,29],[91,28,71,31],[92,8,72,12],[92,12,72,16,"keys"],[92,16,72,20],[92,19,72,23,"getKeys"],[92,26,72,30],[92,27,72,31,"key"],[92,30,72,34],[92,31,72,35],[93,8,73,12,"draggingKeys"],[93,20,73,24],[93,21,73,25,"current"],[93,28,73,32],[93,31,73,35,"keys"],[93,35,73,39],[94,8,74,12,"draggedKey"],[94,18,74,22],[94,19,74,23,"current"],[94,26,74,30],[94,29,74,33,"key"],[94,32,74,36],[95,8,75,12,"selectionManager"],[95,24,75,28],[95,25,75,29,"setFocused"],[95,35,75,39],[95,36,75,40],[95,41,75,45],[95,42,75,46],[96,8,76,12,"setDragging"],[96,19,76,23],[96,20,76,24],[96,24,76,28],[96,25,76,29],[97,8,77,12],[97,12,77,16],[97,19,77,23,"onDragStart"],[97,30,77,34],[97,35,77,39],[97,45,77,49],[97,47,77,51,"onDragStart"],[97,58,77,62],[97,59,77,63],[98,10,78,16],[98,13,78,19,"event"],[98,18,78,24],[99,10,79,16,"keys"],[99,14,79,20],[99,16,79,22,"keys"],[100,8,80,12],[100,9,80,13],[100,10,80,14],[101,6,81,8],[101,7,81,9],[102,6,82,8,"moveDrag"],[102,14,82,16,"moveDrag"],[102,15,82,18,"event"],[102,20,82,23],[102,22,82,25],[103,8,83,12],[103,12,83,16],[103,19,83,23,"onDragMove"],[103,29,83,33],[103,34,83,38],[103,44,83,48],[103,46,83,50,"onDragMove"],[103,56,83,60],[103,57,83,61],[104,10,84,16],[104,13,84,19,"event"],[104,18,84,24],[105,10,85,16,"keys"],[105,14,85,20],[105,16,85,22,"draggingKeys"],[105,28,85,34],[105,29,85,35,"current"],[106,8,86,12],[106,9,86,13],[106,10,86,14],[107,6,87,8],[107,7,87,9],[108,6,88,8,"endDrag"],[108,13,88,15,"endDrag"],[108,14,88,17,"event"],[108,19,88,22],[108,21,88,24],[109,8,89,12],[109,12,89,16],[110,10,89,18,"isInternal"],[110,20,89,28],[110,22,89,30,"isInternal"],[111,8,89,41],[111,9,89,42],[111,12,89,45,"event"],[111,17,89,50],[112,8,90,12],[112,12,90,16],[112,19,90,23,"onDragEnd"],[112,28,90,32],[112,33,90,37],[112,43,90,47],[112,45,90,49,"onDragEnd"],[112,54,90,58],[112,55,90,59],[113,10,91,16],[113,13,91,19,"event"],[113,18,91,24],[114,10,92,16,"keys"],[114,14,92,20],[114,16,92,22,"draggingKeys"],[114,28,92,34],[114,29,92,35,"current"],[114,36,92,42],[115,10,93,16,"isInternal"],[115,20,93,26],[115,22,93,28,"isInternal"],[116,8,94,12],[116,9,94,13],[116,10,94,14],[117,8,95,12,"draggingKeys"],[117,20,95,24],[117,21,95,25,"current"],[117,28,95,32],[117,31,95,35],[117,35,95,39,"Set"],[117,38,95,42],[117,39,95,43],[117,40,95,44],[118,8,96,12,"draggedKey"],[118,18,96,22],[118,19,96,23,"current"],[118,26,96,30],[118,29,96,33],[118,33,96,37],[119,8,97,12,"setDragging"],[119,19,97,23],[119,20,97,24],[119,25,97,29],[119,26,97,30],[120,6,98,8],[121,4,99,4],[121,5,99,5],[122,2,100,0],[123,0,100,1],[123,3]],"functionMap":{"names":["<global>","$b45bbbaf0c3785df$export$29efd034f1d79f81","getKeys","get__draggedKey","get__draggingKeys","isDragging","getItems","startDrag","moveDrag","endDrag"],"mappings":"AAA;ACa;kBCK;KDyB;QEI;SFE;QGC;SHE;QIC;SJE;QKE;SLS;QMI;SNU;QOC;SPK;QQC;SRU;CDE"},"hasCjsExports":false},"type":"js/module"}]}