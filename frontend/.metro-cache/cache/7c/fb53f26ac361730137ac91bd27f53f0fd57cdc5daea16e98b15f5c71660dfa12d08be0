{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":42,"index":42}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"expo-notifications","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":43},"end":{"line":2,"column":52,"index":95}}],"key":"nrBDtkRVez7cBhLzyaRjl+xVfvE=","exportNames":["*"],"imports":1}},{"name":"expo-device","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":96},"end":{"line":3,"column":38,"index":134}}],"key":"bBpmAhO1g++sdeUzQmFVGoQIVwg=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dV3bI3NOD8bfMzaIniMaFGy/nn8=","exportNames":["*"],"imports":1}},{"name":"../contexts/AuthContext","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":176},"end":{"line":5,"column":50,"index":226}}],"key":"oNCgyH4yx4pAIVZXLqqRGB2kuCY=","exportNames":["*"],"imports":1}},{"name":"firebase/firestore","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":227},"end":{"line":6,"column":49,"index":276}}],"key":"n8ZdwTgQb9oFW01pH/SKxYwC/nA=","exportNames":["*"],"imports":1}},{"name":"../config/firebase","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":7,"column":0,"index":277},"end":{"line":7,"column":40,"index":317}}],"key":"K/SZPG5sPeV1upVh8dao26aG7MQ=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.useNotifications = useNotifications;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _expoNotifications = require(_dependencyMap[1], \"expo-notifications\");\n  var Notifications = _interopNamespace(_expoNotifications);\n  var _expoDevice = require(_dependencyMap[2], \"expo-device\");\n  var Device = _interopNamespace(_expoDevice);\n  var _reactNativeWebDistExportsPlatform = require(_dependencyMap[3], \"react-native-web/dist/exports/Platform\");\n  var Platform = _interopDefault(_reactNativeWebDistExportsPlatform);\n  var _contextsAuthContext = require(_dependencyMap[4], \"../contexts/AuthContext\");\n  var _firebaseFirestore = require(_dependencyMap[5], \"firebase/firestore\");\n  var _configFirebase = require(_dependencyMap[6], \"../config/firebase\");\n  Notifications.setNotificationHandler({\n    handleNotification: async () => ({\n      shouldShowAlert: true,\n      shouldPlaySound: true,\n      shouldSetBadge: true\n    })\n  });\n  function useNotifications() {\n    _s();\n    const {\n      user\n    } = (0, _contextsAuthContext.useAuth)();\n    const notificationListener = (0, _react.useRef)();\n    const responseListener = (0, _react.useRef)();\n    (0, _react.useEffect)(() => {\n      registerForPushNotificationsAsync();\n      notificationListener.current = Notifications.addNotificationReceivedListener(notification => {\n        console.log('Notification received:', notification);\n      });\n      responseListener.current = Notifications.addNotificationResponseReceivedListener(response => {\n        console.log('Notification response:', response);\n      });\n      return () => {\n        Notifications.removeNotificationSubscription(notificationListener.current);\n        Notifications.removeNotificationSubscription(responseListener.current);\n      };\n    }, []);\n    const registerForPushNotificationsAsync = async () => {\n      if (!Device.isDevice) {\n        console.log('Must use physical device for Push Notifications');\n        return;\n      }\n      try {\n        const {\n          status: existingStatus\n        } = await Notifications.getPermissionsAsync();\n        let finalStatus = existingStatus;\n        if (existingStatus !== 'granted') {\n          const {\n            status\n          } = await Notifications.requestPermissionsAsync();\n          finalStatus = status;\n        }\n        if (finalStatus !== 'granted') {\n          console.log('Failed to get push token for push notification!');\n          return;\n        }\n        const token = (await Notifications.getExpoPushTokenAsync()).data;\n        console.log('Expo Push Token:', token);\n        if (user) {\n          await (0, _firebaseFirestore.setDoc)((0, _firebaseFirestore.doc)(_configFirebase.db, 'users', user.uid), {\n            pushToken: token,\n            updatedAt: new Date()\n          }, {\n            merge: true\n          });\n        }\n        if (Platform.default.OS === 'android') {\n          Notifications.setNotificationChannelAsync('default', {\n            name: 'default',\n            importance: Notifications.AndroidImportance.MAX,\n            vibrationPattern: [0, 250, 250, 250],\n            lightColor: '#FF231F7C'\n          });\n        }\n      } catch (error) {\n        console.log('Error registering for push notifications:', error);\n      }\n    };\n    const sendPushNotification = async (expoPushToken, title, body, data) => {\n      const message = {\n        to: expoPushToken,\n        sound: 'default',\n        title,\n        body,\n        data\n      };\n      await fetch('https://exp.host/--/api/v2/push/send', {\n        method: 'POST',\n        headers: {\n          Accept: 'application/json',\n          'Accept-encoding': 'gzip, deflate',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(message)\n      });\n    };\n    return {\n      sendPushNotification\n    };\n  }\n  _s(useNotifications, \"wKyn5cFBgXRPMP7FCdkw+uEcGRs=\", false, function () {\n    return [_contextsAuthContext.useAuth];\n  });\n});","lineCount":133,"map":[[28,2,17,0,"exports"],[28,9,17,0],[28,10,17,0,"useNotifications"],[28,26,17,0],[28,29,17,0,"useNotifications"],[28,45,17,0],[29,2,1,0],[29,6,1,0,"_react"],[29,12,1,0],[29,15,1,0,"require"],[29,22,1,0],[29,23,1,0,"_dependencyMap"],[29,37,1,0],[30,2,2,0],[30,6,2,0,"_expoNotifications"],[30,24,2,0],[30,27,2,0,"require"],[30,34,2,0],[30,35,2,0,"_dependencyMap"],[30,49,2,0],[31,2,2,0],[31,6,2,0,"Notifications"],[31,19,2,0],[31,22,2,0,"_interopNamespace"],[31,39,2,0],[31,40,2,0,"_expoNotifications"],[31,58,2,0],[32,2,3,0],[32,6,3,0,"_expoDevice"],[32,17,3,0],[32,20,3,0,"require"],[32,27,3,0],[32,28,3,0,"_dependencyMap"],[32,42,3,0],[33,2,3,0],[33,6,3,0,"Device"],[33,12,3,0],[33,15,3,0,"_interopNamespace"],[33,32,3,0],[33,33,3,0,"_expoDevice"],[33,44,3,0],[34,2,3,38],[34,6,3,38,"_reactNativeWebDistExportsPlatform"],[34,40,3,38],[34,43,3,38,"require"],[34,50,3,38],[34,51,3,38,"_dependencyMap"],[34,65,3,38],[35,2,3,38],[35,6,3,38,"Platform"],[35,14,3,38],[35,17,3,38,"_interopDefault"],[35,32,3,38],[35,33,3,38,"_reactNativeWebDistExportsPlatform"],[35,67,3,38],[36,2,5,0],[36,6,5,0,"_contextsAuthContext"],[36,26,5,0],[36,29,5,0,"require"],[36,36,5,0],[36,37,5,0,"_dependencyMap"],[36,51,5,0],[37,2,6,0],[37,6,6,0,"_firebaseFirestore"],[37,24,6,0],[37,27,6,0,"require"],[37,34,6,0],[37,35,6,0,"_dependencyMap"],[37,49,6,0],[38,2,7,0],[38,6,7,0,"_configFirebase"],[38,21,7,0],[38,24,7,0,"require"],[38,31,7,0],[38,32,7,0,"_dependencyMap"],[38,46,7,0],[39,2,9,0,"Notifications"],[39,15,9,13],[39,16,9,14,"setNotificationHandler"],[39,38,9,36],[39,39,9,37],[40,4,10,2,"handleNotification"],[40,22,10,20],[40,24,10,22],[40,30,10,22,"handleNotification"],[40,31,10,22],[40,37,10,35],[41,6,11,4,"shouldShowAlert"],[41,21,11,19],[41,23,11,21],[41,27,11,25],[42,6,12,4,"shouldPlaySound"],[42,21,12,19],[42,23,12,21],[42,27,12,25],[43,6,13,4,"shouldSetBadge"],[43,20,13,18],[43,22,13,20],[44,4,14,2],[44,5,14,3],[45,2,15,0],[45,3,15,1],[45,4,15,2],[46,2,17,7],[46,11,17,16,"useNotifications"],[46,27,17,32,"useNotifications"],[46,28,17,32],[46,30,17,35],[47,4,17,35,"_s"],[47,6,17,35],[48,4,18,2],[48,10,18,8],[49,6,18,10,"user"],[50,4,18,15],[50,5,18,16],[50,8,18,19],[50,12,18,19,"useAuth"],[50,32,18,26],[50,33,18,26,"useAuth"],[50,40,18,26],[50,42,18,27],[50,43,18,28],[51,4,19,2],[51,10,19,8,"notificationListener"],[51,30,19,28],[51,33,19,31],[51,37,19,31,"useRef"],[51,43,19,37],[51,44,19,37,"useRef"],[51,50,19,37],[51,52,19,43],[51,53,19,44],[52,4,20,2],[52,10,20,8,"responseListener"],[52,26,20,24],[52,29,20,27],[52,33,20,27,"useRef"],[52,39,20,33],[52,40,20,33,"useRef"],[52,46,20,33],[52,48,20,39],[52,49,20,40],[53,4,22,2],[53,8,22,2,"useEffect"],[53,14,22,11],[53,15,22,11,"useEffect"],[53,24,22,11],[53,26,22,12],[53,32,22,18],[54,6,23,4,"registerForPushNotificationsAsync"],[54,39,23,37],[54,40,23,38],[54,41,23,39],[55,6,25,4,"notificationListener"],[55,26,25,24],[55,27,25,25,"current"],[55,34,25,32],[55,37,25,35,"Notifications"],[55,50,25,48],[55,51,25,49,"addNotificationReceivedListener"],[55,82,25,80],[55,83,25,81,"notification"],[55,95,25,93],[55,99,25,97],[56,8,26,6,"console"],[56,15,26,13],[56,16,26,14,"log"],[56,19,26,17],[56,20,26,18],[56,44,26,42],[56,46,26,44,"notification"],[56,58,26,56],[56,59,26,57],[57,6,27,4],[57,7,27,5],[57,8,27,6],[58,6,29,4,"responseListener"],[58,22,29,20],[58,23,29,21,"current"],[58,30,29,28],[58,33,29,31,"Notifications"],[58,46,29,44],[58,47,29,45,"addNotificationResponseReceivedListener"],[58,86,29,84],[58,87,29,85,"response"],[58,95,29,93],[58,99,29,97],[59,8,30,6,"console"],[59,15,30,13],[59,16,30,14,"log"],[59,19,30,17],[59,20,30,18],[59,44,30,42],[59,46,30,44,"response"],[59,54,30,52],[59,55,30,53],[60,6,31,4],[60,7,31,5],[60,8,31,6],[61,6,33,4],[61,13,33,11],[61,19,33,17],[62,8,34,6,"Notifications"],[62,21,34,19],[62,22,34,20,"removeNotificationSubscription"],[62,52,34,50],[62,53,34,51,"notificationListener"],[62,73,34,71],[62,74,34,72,"current"],[62,81,34,79],[62,82,34,80],[63,8,35,6,"Notifications"],[63,21,35,19],[63,22,35,20,"removeNotificationSubscription"],[63,52,35,50],[63,53,35,51,"responseListener"],[63,69,35,67],[63,70,35,68,"current"],[63,77,35,75],[63,78,35,76],[64,6,36,4],[64,7,36,5],[65,4,37,2],[65,5,37,3],[65,7,37,5],[65,9,37,7],[65,10,37,8],[66,4,39,2],[66,10,39,8,"registerForPushNotificationsAsync"],[66,43,39,41],[66,46,39,44],[66,52,39,44,"registerForPushNotificationsAsync"],[66,53,39,44],[66,58,39,56],[67,6,40,4],[67,10,40,8],[67,11,40,9,"Device"],[67,17,40,15],[67,18,40,16,"isDevice"],[67,26,40,24],[67,28,40,26],[68,8,41,6,"console"],[68,15,41,13],[68,16,41,14,"log"],[68,19,41,17],[68,20,41,18],[68,69,41,67],[68,70,41,68],[69,8,42,6],[70,6,43,4],[71,6,45,4],[71,10,45,8],[72,8,46,6],[72,14,46,12],[73,10,46,14,"status"],[73,16,46,20],[73,18,46,22,"existingStatus"],[74,8,46,37],[74,9,46,38],[74,12,46,41],[74,18,46,47,"Notifications"],[74,31,46,60],[74,32,46,61,"getPermissionsAsync"],[74,51,46,80],[74,52,46,81],[74,53,46,82],[75,8,47,6],[75,12,47,10,"finalStatus"],[75,23,47,21],[75,26,47,24,"existingStatus"],[75,40,47,38],[76,8,49,6],[76,12,49,10,"existingStatus"],[76,26,49,24],[76,31,49,29],[76,40,49,38],[76,42,49,40],[77,10,50,8],[77,16,50,14],[78,12,50,16,"status"],[79,10,50,23],[79,11,50,24],[79,14,50,27],[79,20,50,33,"Notifications"],[79,33,50,46],[79,34,50,47,"requestPermissionsAsync"],[79,57,50,70],[79,58,50,71],[79,59,50,72],[80,10,51,8,"finalStatus"],[80,21,51,19],[80,24,51,22,"status"],[80,30,51,28],[81,8,52,6],[82,8,54,6],[82,12,54,10,"finalStatus"],[82,23,54,21],[82,28,54,26],[82,37,54,35],[82,39,54,37],[83,10,55,8,"console"],[83,17,55,15],[83,18,55,16,"log"],[83,21,55,19],[83,22,55,20],[83,71,55,69],[83,72,55,70],[84,10,56,8],[85,8,57,6],[86,8,59,6],[86,14,59,12,"token"],[86,19,59,17],[86,22,59,20],[86,23,59,21],[86,29,59,27,"Notifications"],[86,42,59,40],[86,43,59,41,"getExpoPushTokenAsync"],[86,64,59,62],[86,65,59,63],[86,66,59,64],[86,68,59,66,"data"],[86,72,59,70],[87,8,60,6,"console"],[87,15,60,13],[87,16,60,14,"log"],[87,19,60,17],[87,20,60,18],[87,38,60,36],[87,40,60,38,"token"],[87,45,60,43],[87,46,60,44],[88,8,62,6],[88,12,62,10,"user"],[88,16,62,14],[88,18,62,16],[89,10,63,8],[89,16,63,14],[89,20,63,14,"setDoc"],[89,38,63,20],[89,39,63,20,"setDoc"],[89,45,63,20],[89,47,64,10],[89,51,64,10,"doc"],[89,69,64,13],[89,70,64,13,"doc"],[89,73,64,13],[89,75,64,14,"db"],[89,90,64,16],[89,91,64,16,"db"],[89,93,64,16],[89,95,64,18],[89,102,64,25],[89,104,64,27,"user"],[89,108,64,31],[89,109,64,32,"uid"],[89,112,64,35],[89,113,64,36],[89,115,65,10],[90,12,65,12,"pushToken"],[90,21,65,21],[90,23,65,23,"token"],[90,28,65,28],[91,12,65,30,"updatedAt"],[91,21,65,39],[91,23,65,41],[91,27,65,45,"Date"],[91,31,65,49],[91,32,65,50],[92,10,65,52],[92,11,65,53],[92,13,66,10],[93,12,66,12,"merge"],[93,17,66,17],[93,19,66,19],[94,10,66,24],[94,11,67,8],[94,12,67,9],[95,8,68,6],[96,8,70,6],[96,12,70,10,"Platform"],[96,20,70,18],[96,21,70,18,"default"],[96,28,70,18],[96,29,70,19,"OS"],[96,31,70,21],[96,36,70,26],[96,45,70,35],[96,47,70,37],[97,10,71,8,"Notifications"],[97,23,71,21],[97,24,71,22,"setNotificationChannelAsync"],[97,51,71,49],[97,52,71,50],[97,61,71,59],[97,63,71,61],[98,12,72,10,"name"],[98,16,72,14],[98,18,72,16],[98,27,72,25],[99,12,73,10,"importance"],[99,22,73,20],[99,24,73,22,"Notifications"],[99,37,73,35],[99,38,73,36,"AndroidImportance"],[99,55,73,53],[99,56,73,54,"MAX"],[99,59,73,57],[100,12,74,10,"vibrationPattern"],[100,28,74,26],[100,30,74,28],[100,31,74,29],[100,32,74,30],[100,34,74,32],[100,37,74,35],[100,39,74,37],[100,42,74,40],[100,44,74,42],[100,47,74,45],[100,48,74,46],[101,12,75,10,"lightColor"],[101,22,75,20],[101,24,75,22],[102,10,76,8],[102,11,76,9],[102,12,76,10],[103,8,77,6],[104,6,78,4],[104,7,78,5],[104,8,78,6],[104,15,78,13,"error"],[104,20,78,18],[104,22,78,20],[105,8,79,6,"console"],[105,15,79,13],[105,16,79,14,"log"],[105,19,79,17],[105,20,79,18],[105,63,79,61],[105,65,79,63,"error"],[105,70,79,68],[105,71,79,69],[106,6,80,4],[107,4,81,2],[107,5,81,3],[108,4,83,2],[108,10,83,8,"sendPushNotification"],[108,30,83,28],[108,33,83,31],[108,39,83,31,"sendPushNotification"],[108,40,83,38,"expoPushToken"],[108,53,83,59],[108,55,83,61,"title"],[108,60,83,74],[108,62,83,76,"body"],[108,66,83,88],[108,68,83,90,"data"],[108,72,83,100],[108,77,83,105],[109,6,84,4],[109,12,84,10,"message"],[109,19,84,17],[109,22,84,20],[110,8,85,6,"to"],[110,10,85,8],[110,12,85,10,"expoPushToken"],[110,25,85,23],[111,8,86,6,"sound"],[111,13,86,11],[111,15,86,13],[111,24,86,22],[112,8,87,6,"title"],[112,13,87,11],[113,8,88,6,"body"],[113,12,88,10],[114,8,89,6,"data"],[115,6,90,4],[115,7,90,5],[116,6,92,4],[116,12,92,10,"fetch"],[116,17,92,15],[116,18,92,16],[116,56,92,54],[116,58,92,56],[117,8,93,6,"method"],[117,14,93,12],[117,16,93,14],[117,22,93,20],[118,8,94,6,"headers"],[118,15,94,13],[118,17,94,15],[119,10,95,8,"Accept"],[119,16,95,14],[119,18,95,16],[119,36,95,34],[120,10,96,8],[120,27,96,25],[120,29,96,27],[120,44,96,42],[121,10,97,8],[121,24,97,22],[121,26,97,24],[122,8,98,6],[122,9,98,7],[123,8,99,6,"body"],[123,12,99,10],[123,14,99,12,"JSON"],[123,18,99,16],[123,19,99,17,"stringify"],[123,28,99,26],[123,29,99,27,"message"],[123,36,99,34],[124,6,100,4],[124,7,100,5],[124,8,100,6],[125,4,101,2],[125,5,101,3],[126,4,103,2],[126,11,103,9],[127,6,103,11,"sendPushNotification"],[128,4,103,32],[128,5,103,33],[129,2,104,0],[130,2,104,1,"_s"],[130,4,104,1],[130,5,17,16,"useNotifications"],[130,21,17,32],[131,4,17,32],[131,12,18,19,"useAuth"],[131,32,18,26],[131,33,18,26,"useAuth"],[131,40,18,26],[132,2,18,26],[133,0,18,26],[133,3]],"functionMap":{"names":["<global>","Notifications.setNotificationHandler$argument_0.handleNotification","useNotifications","useEffect$argument_0","Notifications.addNotificationReceivedListener$argument_0","Notifications.addNotificationResponseReceivedListener$argument_0","<anonymous>","registerForPushNotificationsAsync","sendPushNotification"],"mappings":"AAA;sBCS;IDI;OEG;YCK;iFCG;KDE;qFEE;KFE;WGE;KHG;GDC;4CKE;GL0C;+BME;GNkB"},"hasCjsExports":false},"type":"js/module"}]}