{"dependencies":[{"name":"./useEvent.mjs","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":85,"index":85}}],"key":"TMAEqstNoI6MKZbmZsa8xbxNrW0=","exportNames":["*"],"imports":1}},{"name":"./useLayoutEffect.mjs","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":86},"end":{"line":2,"column":99,"index":185}}],"key":"oK3260rJ5SwRPMPILNPRW6WgUE8=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":186},"end":{"line":3,"column":81,"index":267}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"useLoadMore\", {\n    enumerable: true,\n    get: function () {\n      return $26f7f3da73fcd9d6$export$7717c92ee915373e;\n    }\n  });\n  var _useEventMjs = require(_dependencyMap[0], \"./useEvent.mjs\");\n  var _useLayoutEffectMjs = require(_dependencyMap[1], \"./useLayoutEffect.mjs\");\n  var _react = require(_dependencyMap[2], \"react\");\n  /*\n   * Copyright 2024 Adobe. All rights reserved.\n   * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License. You may obtain a copy\n   * of the License at http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software distributed under\n   * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n   * OF ANY KIND, either express or implied. See the License for the specific language\n   * governing permissions and limitations under the License.\n   */\n\n  function $26f7f3da73fcd9d6$export$7717c92ee915373e(props, ref) {\n    let {\n      isLoading: isLoading,\n      onLoadMore: onLoadMore,\n      scrollOffset = 1,\n      items: items\n    } = props;\n    // Handle scrolling, and call onLoadMore when nearing the bottom.\n    let isLoadingRef = (0, _react.useRef)(isLoading);\n    let prevProps = (0, _react.useRef)(props);\n    let onScroll = (0, _react.useCallback)(() => {\n      if (ref.current && !isLoadingRef.current && onLoadMore) {\n        let shouldLoadMore = ref.current.scrollHeight - ref.current.scrollTop - ref.current.clientHeight < ref.current.clientHeight * scrollOffset;\n        if (shouldLoadMore) {\n          isLoadingRef.current = true;\n          onLoadMore();\n        }\n      }\n    }, [onLoadMore, ref, scrollOffset]);\n    let lastItems = (0, _react.useRef)(items);\n    (0, _useLayoutEffectMjs.useLayoutEffect)(() => {\n      // Only update isLoadingRef if props object actually changed,\n      // not if a local state change occurred.\n      if (props !== prevProps.current) {\n        isLoadingRef.current = isLoading;\n        prevProps.current = props;\n      }\n      // TODO: Eventually this hook will move back into RAC during which we will accept the collection as a option to this hook.\n      // We will only load more if the collection has changed after the last load to prevent multiple onLoadMore from being called\n      // while the data from the last onLoadMore is being processed by RAC collection.\n      let shouldLoadMore = (ref === null || ref === void 0 ? void 0 : ref.current) && !isLoadingRef.current && onLoadMore && (!items || items !== lastItems.current) && ref.current.clientHeight === ref.current.scrollHeight;\n      if (shouldLoadMore) {\n        isLoadingRef.current = true;\n        onLoadMore === null || onLoadMore === void 0 ? void 0 : onLoadMore();\n      }\n      lastItems.current = items;\n    }, [isLoading, onLoadMore, props, ref, items]);\n    // TODO: maybe this should still just return scroll props?\n    // Test against case where the ref isn't defined when this is called\n    // Think this was a problem when trying to attach to the scrollable body of the table in OnLoadMoreTableBodyScroll\n    (0, _useEventMjs.useEvent)(ref, 'scroll', onScroll);\n  }\n});","lineCount":70,"map":[[7,2,67,0,"Object"],[7,8,67,0],[7,9,67,0,"defineProperty"],[7,23,67,0],[7,24,67,0,"exports"],[7,31,67,0],[8,4,67,0,"enumerable"],[8,14,67,0],[9,4,67,0,"get"],[9,7,67,0],[9,18,67,0,"get"],[9,19,67,0],[10,6,67,0],[10,13,67,8,"$26f7f3da73fcd9d6$export$7717c92ee915373e"],[10,54,67,49],[11,4,67,49],[12,2,67,49],[13,2,1,0],[13,6,1,0,"_useEventMjs"],[13,18,1,0],[13,21,1,0,"require"],[13,28,1,0],[13,29,1,0,"_dependencyMap"],[13,43,1,0],[14,2,2,0],[14,6,2,0,"_useLayoutEffectMjs"],[14,25,2,0],[14,28,2,0,"require"],[14,35,2,0],[14,36,2,0,"_dependencyMap"],[14,50,2,0],[15,2,3,0],[15,6,3,0,"_react"],[15,12,3,0],[15,15,3,0,"require"],[15,22,3,0],[15,23,3,0,"_dependencyMap"],[15,37,3,0],[16,2,5,0],[17,0,6,0],[18,0,7,0],[19,0,8,0],[20,0,9,0],[21,0,10,0],[22,0,11,0],[23,0,12,0],[24,0,13,0],[25,0,14,0],[26,0,15,0],[28,2,18,0],[28,11,18,9,"$26f7f3da73fcd9d6$export$7717c92ee915373e"],[28,52,18,50,"$26f7f3da73fcd9d6$export$7717c92ee915373e"],[28,53,18,51,"props"],[28,58,18,56],[28,60,18,58,"ref"],[28,63,18,61],[28,65,18,63],[29,4,19,4],[29,8,19,8],[30,6,19,10,"isLoading"],[30,15,19,19],[30,17,19,21,"isLoading"],[30,26,19,30],[31,6,19,32,"onLoadMore"],[31,16,19,42],[31,18,19,44,"onLoadMore"],[31,28,19,54],[32,6,19,70,"scrollOffset"],[32,18,19,82],[32,21,19,85],[32,22,19,86],[33,6,19,88,"items"],[33,11,19,93],[33,13,19,95,"items"],[34,4,19,101],[34,5,19,102],[34,8,19,105,"props"],[34,13,19,110],[35,4,20,4],[36,4,21,4],[36,8,21,8,"isLoadingRef"],[36,20,21,20],[36,23,21,23],[36,24,21,24],[36,25,21,25],[36,27,21,27,"$hDRkU$useRef"],[36,33,21,40],[36,34,21,40,"useRef"],[36,40,21,40],[36,42,21,42,"isLoading"],[36,51,21,51],[36,52,21,52],[37,4,22,4],[37,8,22,8,"prevProps"],[37,17,22,17],[37,20,22,20],[37,21,22,21],[37,22,22,22],[37,24,22,24,"$hDRkU$useRef"],[37,30,22,37],[37,31,22,37,"useRef"],[37,37,22,37],[37,39,22,39,"props"],[37,44,22,44],[37,45,22,45],[38,4,23,4],[38,8,23,8,"onScroll"],[38,16,23,16],[38,19,23,19],[38,20,23,20],[38,21,23,21],[38,23,23,23,"$hDRkU$useCallback"],[38,29,23,41],[38,30,23,41,"useCallback"],[38,41,23,41],[38,43,23,43],[38,49,23,47],[39,6,24,8],[39,10,24,12,"ref"],[39,13,24,15],[39,14,24,16,"current"],[39,21,24,23],[39,25,24,27],[39,26,24,28,"isLoadingRef"],[39,38,24,40],[39,39,24,41,"current"],[39,46,24,48],[39,50,24,52,"onLoadMore"],[39,60,24,62],[39,62,24,64],[40,8,25,12],[40,12,25,16,"shouldLoadMore"],[40,26,25,30],[40,29,25,33,"ref"],[40,32,25,36],[40,33,25,37,"current"],[40,40,25,44],[40,41,25,45,"scrollHeight"],[40,53,25,57],[40,56,25,60,"ref"],[40,59,25,63],[40,60,25,64,"current"],[40,67,25,71],[40,68,25,72,"scrollTop"],[40,77,25,81],[40,80,25,84,"ref"],[40,83,25,87],[40,84,25,88,"current"],[40,91,25,95],[40,92,25,96,"clientHeight"],[40,104,25,108],[40,107,25,111,"ref"],[40,110,25,114],[40,111,25,115,"current"],[40,118,25,122],[40,119,25,123,"clientHeight"],[40,131,25,135],[40,134,25,138,"scrollOffset"],[40,146,25,150],[41,8,26,12],[41,12,26,16,"shouldLoadMore"],[41,26,26,30],[41,28,26,32],[42,10,27,16,"isLoadingRef"],[42,22,27,28],[42,23,27,29,"current"],[42,30,27,36],[42,33,27,39],[42,37,27,43],[43,10,28,16,"onLoadMore"],[43,20,28,26],[43,21,28,27],[43,22,28,28],[44,8,29,12],[45,6,30,8],[46,4,31,4],[46,5,31,5],[46,7,31,7],[46,8,32,8,"onLoadMore"],[46,18,32,18],[46,20,33,8,"ref"],[46,23,33,11],[46,25,34,8,"scrollOffset"],[46,37,34,20],[46,38,35,5],[46,39,35,6],[47,4,36,4],[47,8,36,8,"lastItems"],[47,17,36,17],[47,20,36,20],[47,21,36,21],[47,22,36,22],[47,24,36,24,"$hDRkU$useRef"],[47,30,36,37],[47,31,36,37,"useRef"],[47,37,36,37],[47,39,36,39,"items"],[47,44,36,44],[47,45,36,45],[48,4,37,4],[48,5,37,5],[48,6,37,6],[48,8,37,8,"$f0a04ccd8dbdd83b$export$e5c5a5f917a5871c"],[48,27,37,49],[48,28,37,49,"useLayoutEffect"],[48,43,37,49],[48,45,37,51],[48,51,37,55],[49,6,38,8],[50,6,39,8],[51,6,40,8],[51,10,40,12,"props"],[51,15,40,17],[51,20,40,22,"prevProps"],[51,29,40,31],[51,30,40,32,"current"],[51,37,40,39],[51,39,40,41],[52,8,41,12,"isLoadingRef"],[52,20,41,24],[52,21,41,25,"current"],[52,28,41,32],[52,31,41,35,"isLoading"],[52,40,41,44],[53,8,42,12,"prevProps"],[53,17,42,21],[53,18,42,22,"current"],[53,25,42,29],[53,28,42,32,"props"],[53,33,42,37],[54,6,43,8],[55,6,44,8],[56,6,45,8],[57,6,46,8],[58,6,47,8],[58,10,47,12,"shouldLoadMore"],[58,24,47,26],[58,27,47,29],[58,28,47,30,"ref"],[58,31,47,33],[58,36,47,38],[58,40,47,42],[58,44,47,46,"ref"],[58,47,47,49],[58,52,47,54],[58,57,47,59],[58,58,47,60],[58,61,47,63],[58,66,47,68],[58,67,47,69],[58,70,47,72,"ref"],[58,73,47,75],[58,74,47,76,"current"],[58,81,47,83],[58,86,47,88],[58,87,47,89,"isLoadingRef"],[58,99,47,101],[58,100,47,102,"current"],[58,107,47,109],[58,111,47,113,"onLoadMore"],[58,121,47,123],[58,126,47,128],[58,127,47,129,"items"],[58,132,47,134],[58,136,47,138,"items"],[58,141,47,143],[58,146,47,148,"lastItems"],[58,155,47,157],[58,156,47,158,"current"],[58,163,47,165],[58,164,47,166],[58,168,47,170,"ref"],[58,171,47,173],[58,172,47,174,"current"],[58,179,47,181],[58,180,47,182,"clientHeight"],[58,192,47,194],[58,197,47,199,"ref"],[58,200,47,202],[58,201,47,203,"current"],[58,208,47,210],[58,209,47,211,"scrollHeight"],[58,221,47,223],[59,6,48,8],[59,10,48,12,"shouldLoadMore"],[59,24,48,26],[59,26,48,28],[60,8,49,12,"isLoadingRef"],[60,20,49,24],[60,21,49,25,"current"],[60,28,49,32],[60,31,49,35],[60,35,49,39],[61,8,50,12,"onLoadMore"],[61,18,50,22],[61,23,50,27],[61,27,50,31],[61,31,50,35,"onLoadMore"],[61,41,50,45],[61,46,50,50],[61,51,50,55],[61,52,50,56],[61,55,50,59],[61,60,50,64],[61,61,50,65],[61,64,50,68,"onLoadMore"],[61,74,50,78],[61,75,50,79],[61,76,50,80],[62,6,51,8],[63,6,52,8,"lastItems"],[63,15,52,17],[63,16,52,18,"current"],[63,23,52,25],[63,26,52,28,"items"],[63,31,52,33],[64,4,53,4],[64,5,53,5],[64,7,53,7],[64,8,54,8,"isLoading"],[64,17,54,17],[64,19,55,8,"onLoadMore"],[64,29,55,18],[64,31,56,8,"props"],[64,36,56,13],[64,38,57,8,"ref"],[64,41,57,11],[64,43,58,8,"items"],[64,48,58,13],[64,49,59,5],[64,50,59,6],[65,4,60,4],[66,4,61,4],[67,4,62,4],[68,4,63,4],[68,5,63,5],[68,6,63,6],[68,8,63,8,"$e9faafb641e167db$export$90fc3a17d93f704c"],[68,20,63,49],[68,21,63,49,"useEvent"],[68,29,63,49],[68,31,63,51,"ref"],[68,34,63,54],[68,36,63,56],[68,44,63,64],[68,46,63,66,"onScroll"],[68,54,63,74],[68,55,63,75],[69,2,64,0],[70,0,64,1],[70,3]],"functionMap":{"names":["<global>","$26f7f3da73fcd9d6$export$7717c92ee915373e","<anonymous>"],"mappings":"AAA;ACiB;2CCK;KDQ;mDCM;KDgB;CDW"},"hasCjsExports":false},"type":"js/module"}]}