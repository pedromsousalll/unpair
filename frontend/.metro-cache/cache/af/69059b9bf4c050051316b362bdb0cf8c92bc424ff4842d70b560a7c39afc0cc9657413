{"dependencies":[{"name":"./getScrollParent.main.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":1,"column":32,"index":32},"end":{"line":1,"column":68,"index":68}}],"key":"+ZSzKvxYfyn8mlYYiKQndz5lAS8=","exportNames":["*"],"imports":1}},{"name":"./useEffectEvent.main.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":2,"column":32,"index":102},"end":{"line":2,"column":67,"index":137}}],"key":"miwwnha3p17Ewvn03DDCCSU2/Ow=","exportNames":["*"],"imports":1}},{"name":"./useLayoutEffect.main.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":3,"column":32,"index":171},"end":{"line":3,"column":68,"index":207}}],"key":"TbXf8L8jhCWxJCdYU7FEHgIZ098=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":4,"column":19,"index":228},"end":{"line":4,"column":35,"index":244}}],"key":"XN65eZP/QkNMzaBAXbG/zPyidpY=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var $d796e7157ac96470$exports = require(_dependencyMap[0], \"./getScrollParent.main.js\");\n  var $1254e5bb94ac8761$exports = require(_dependencyMap[1], \"./useEffectEvent.main.js\");\n  var $78605a5d7424e31b$exports = require(_dependencyMap[2], \"./useLayoutEffect.main.js\");\n  var $8Ncyo$react = require(_dependencyMap[3], \"react\");\n  function $parcel$export(e, n, v, s) {\n    Object.defineProperty(e, n, {\n      get: v,\n      set: s,\n      enumerable: true,\n      configurable: true\n    });\n  }\n  $parcel$export(module.exports, \"useLoadMoreSentinel\", () => $f6a4874a7c582761$export$ccaea96c28e8b9e7);\n  /*\n   * Copyright 2024 Adobe. All rights reserved.\n   * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License. You may obtain a copy\n   * of the License at http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software distributed under\n   * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n   * OF ANY KIND, either express or implied. See the License for the specific language\n   * governing permissions and limitations under the License.\n   */\n\n  function $f6a4874a7c582761$export$ccaea96c28e8b9e7(props, ref) {\n    let {\n      collection: collection,\n      onLoadMore: onLoadMore,\n      scrollOffset = 1\n    } = props;\n    let sentinelObserver = (0, $8Ncyo$react.useRef)(null);\n    let triggerLoadMore = (0, $1254e5bb94ac8761$exports.useEffectEvent)(entries => {\n      // Use \"isIntersecting\" over an equality check of 0 since it seems like there is cases where\n      // a intersection ratio of 0 can be reported when isIntersecting is actually true\n      for (let entry of entries)\n      // Note that this will be called if the collection changes, even if onLoadMore was already called and is being processed.\n      // Up to user discretion as to how to handle these multiple onLoadMore calls\n      if (entry.isIntersecting && onLoadMore) onLoadMore();\n    });\n    (0, $78605a5d7424e31b$exports.useLayoutEffect)(() => {\n      if (ref.current) {\n        // Tear down and set up a new IntersectionObserver when the collection changes so that we can properly trigger additional loadMores if there is room for more items\n        // Need to do this tear down and set up since using a large rootMargin will mean the observer's callback isn't called even when scrolling the item into view beause its visibility hasn't actually changed\n        // https://codesandbox.io/p/sandbox/magical-swanson-dhgp89?file=%2Fsrc%2FApp.js%3A21%2C21\n        sentinelObserver.current = new IntersectionObserver(triggerLoadMore, {\n          root: (0, $d796e7157ac96470$exports.getScrollParent)(ref === null || ref === void 0 ? void 0 : ref.current),\n          rootMargin: `0px ${100 * scrollOffset}% ${100 * scrollOffset}% ${100 * scrollOffset}%`\n        });\n        sentinelObserver.current.observe(ref.current);\n      }\n      return () => {\n        if (sentinelObserver.current) sentinelObserver.current.disconnect();\n      };\n    }, [collection, triggerLoadMore, ref, scrollOffset]);\n  }\n});","lineCount":58,"map":[[2,2,1,0],[2,6,1,4,"$d796e7157ac96470$exports"],[2,31,1,29],[2,34,1,32,"require"],[2,41,1,39],[2,42,1,39,"_dependencyMap"],[2,56,1,39],[2,88,1,67],[2,89,1,68],[3,2,2,0],[3,6,2,4,"$1254e5bb94ac8761$exports"],[3,31,2,29],[3,34,2,32,"require"],[3,41,2,39],[3,42,2,39,"_dependencyMap"],[3,56,2,39],[3,87,2,66],[3,88,2,67],[4,2,3,0],[4,6,3,4,"$78605a5d7424e31b$exports"],[4,31,3,29],[4,34,3,32,"require"],[4,41,3,39],[4,42,3,39,"_dependencyMap"],[4,56,3,39],[4,88,3,67],[4,89,3,68],[5,2,4,0],[5,6,4,4,"$8Ncyo$react"],[5,18,4,16],[5,21,4,19,"require"],[5,28,4,26],[5,29,4,26,"_dependencyMap"],[5,43,4,26],[5,55,4,34],[5,56,4,35],[6,2,7,0],[6,11,7,9,"$parcel$export"],[6,25,7,23,"$parcel$export"],[6,26,7,24,"e"],[6,27,7,25],[6,29,7,27,"n"],[6,30,7,28],[6,32,7,30,"v"],[6,33,7,31],[6,35,7,33,"s"],[6,36,7,34],[6,38,7,36],[7,4,8,2,"Object"],[7,10,8,8],[7,11,8,9,"defineProperty"],[7,25,8,23],[7,26,8,24,"e"],[7,27,8,25],[7,29,8,27,"n"],[7,30,8,28],[7,32,8,30],[8,6,8,31,"get"],[8,9,8,34],[8,11,8,36,"v"],[8,12,8,37],[9,6,8,39,"set"],[9,9,8,42],[9,11,8,44,"s"],[9,12,8,45],[10,6,8,47,"enumerable"],[10,16,8,57],[10,18,8,59],[10,22,8,63],[11,6,8,65,"configurable"],[11,18,8,77],[11,20,8,79],[12,4,8,83],[12,5,8,84],[12,6,8,85],[13,2,9,0],[14,2,11,0,"$parcel$export"],[14,16,11,14],[14,17,11,15,"module"],[14,23,11,21],[14,24,11,22,"exports"],[14,31,11,29],[14,33,11,31],[14,54,11,52],[14,56,11,54],[14,62,11,60,"$f6a4874a7c582761$export$ccaea96c28e8b9e7"],[14,103,11,101],[14,104,11,102],[15,2,12,0],[16,0,13,0],[17,0,14,0],[18,0,15,0],[19,0,16,0],[20,0,17,0],[21,0,18,0],[22,0,19,0],[23,0,20,0],[24,0,21,0],[25,0,22,0],[27,2,26,0],[27,11,26,9,"$f6a4874a7c582761$export$ccaea96c28e8b9e7"],[27,52,26,50,"$f6a4874a7c582761$export$ccaea96c28e8b9e7"],[27,53,26,51,"props"],[27,58,26,56],[27,60,26,58,"ref"],[27,63,26,61],[27,65,26,63],[28,4,27,4],[28,8,27,8],[29,6,27,10,"collection"],[29,16,27,20],[29,18,27,22,"collection"],[29,28,27,32],[30,6,27,34,"onLoadMore"],[30,16,27,44],[30,18,27,46,"onLoadMore"],[30,28,27,56],[31,6,27,72,"scrollOffset"],[31,18,27,84],[31,21,27,87],[32,4,27,89],[32,5,27,90],[32,8,27,93,"props"],[32,13,27,98],[33,4,28,4],[33,8,28,8,"sentinelObserver"],[33,24,28,24],[33,27,28,27],[33,28,28,28],[33,29,28,29],[33,31,28,31,"$8Ncyo$react"],[33,43,28,43],[33,44,28,44,"useRef"],[33,50,28,50],[33,52,28,52],[33,56,28,56],[33,57,28,57],[34,4,29,4],[34,8,29,8,"triggerLoadMore"],[34,23,29,23],[34,26,29,26],[34,27,29,27],[34,28,29,28],[34,30,29,30,"$1254e5bb94ac8761$exports"],[34,55,29,55],[34,56,29,56,"useEffectEvent"],[34,70,29,70],[34,72,29,73,"entries"],[34,79,29,80],[34,83,29,83],[35,6,30,8],[36,6,31,8],[37,6,32,8],[37,11,32,13],[37,15,32,17,"entry"],[37,20,32,22],[37,24,32,26,"entries"],[37,31,32,33],[38,6,32,34],[39,6,33,8],[40,6,34,8],[40,10,34,12,"entry"],[40,15,34,17],[40,16,34,18,"isIntersecting"],[40,30,34,32],[40,34,34,36,"onLoadMore"],[40,44,34,46],[40,46,34,48,"onLoadMore"],[40,56,34,58],[40,57,34,59],[40,58,34,60],[41,4,35,4],[41,5,35,5],[41,6,35,6],[42,4,36,4],[42,5,36,5],[42,6,36,6],[42,8,36,8,"$78605a5d7424e31b$exports"],[42,33,36,33],[42,34,36,34,"useLayoutEffect"],[42,49,36,49],[42,51,36,51],[42,57,36,55],[43,6,37,8],[43,10,37,12,"ref"],[43,13,37,15],[43,14,37,16,"current"],[43,21,37,23],[43,23,37,25],[44,8,38,12],[45,8,39,12],[46,8,40,12],[47,8,41,12,"sentinelObserver"],[47,24,41,28],[47,25,41,29,"current"],[47,32,41,36],[47,35,41,39],[47,39,41,43,"IntersectionObserver"],[47,59,41,63],[47,60,41,64,"triggerLoadMore"],[47,75,41,79],[47,77,41,81],[48,10,42,16,"root"],[48,14,42,20],[48,16,42,22],[48,17,42,23],[48,18,42,24],[48,20,42,26,"$d796e7157ac96470$exports"],[48,45,42,51],[48,46,42,52,"getScrollParent"],[48,61,42,67],[48,63,42,69,"ref"],[48,66,42,72],[48,71,42,77],[48,75,42,81],[48,79,42,85,"ref"],[48,82,42,88],[48,87,42,93],[48,92,42,98],[48,93,42,99],[48,96,42,102],[48,101,42,107],[48,102,42,108],[48,105,42,111,"ref"],[48,108,42,114],[48,109,42,115,"current"],[48,116,42,122],[48,117,42,123],[49,10,43,16,"rootMargin"],[49,20,43,26],[49,22,43,28],[49,29,43,35],[49,32,43,38],[49,35,43,41,"scrollOffset"],[49,47,43,53],[49,52,43,58],[49,55,43,61],[49,58,43,64,"scrollOffset"],[49,70,43,76],[49,75,43,81],[49,78,43,84],[49,81,43,87,"scrollOffset"],[49,93,43,99],[50,8,44,12],[50,9,44,13],[50,10,44,14],[51,8,45,12,"sentinelObserver"],[51,24,45,28],[51,25,45,29,"current"],[51,32,45,36],[51,33,45,37,"observe"],[51,40,45,44],[51,41,45,45,"ref"],[51,44,45,48],[51,45,45,49,"current"],[51,52,45,56],[51,53,45,57],[52,6,46,8],[53,6,47,8],[53,13,47,15],[53,19,47,19],[54,8,48,12],[54,12,48,16,"sentinelObserver"],[54,28,48,32],[54,29,48,33,"current"],[54,36,48,40],[54,38,48,42,"sentinelObserver"],[54,54,48,58],[54,55,48,59,"current"],[54,62,48,66],[54,63,48,67,"disconnect"],[54,73,48,77],[54,74,48,78],[54,75,48,79],[55,6,49,8],[55,7,49,9],[56,4,50,4],[56,5,50,5],[56,7,50,7],[56,8,51,8,"collection"],[56,18,51,18],[56,20,52,8,"triggerLoadMore"],[56,35,52,23],[56,37,53,8,"ref"],[56,40,53,11],[56,42,54,8,"scrollOffset"],[56,54,54,20],[56,55,55,5],[56,56,55,6],[57,2,56,0],[58,0,56,1],[58,3]],"functionMap":{"names":["<global>","$parcel$export","$parcel$export$argument_2","$f6a4874a7c582761$export$ccaea96c28e8b9e7","<anonymous>"],"mappings":"AAA;ACM;CDE;sDEE,+CF;AGe;wECG;KDM;mDCC;KDc;CHM"},"hasCjsExports":false},"type":"js/module"}]}