{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":42,"index":42}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"expo-notifications","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":43},"end":{"line":2,"column":52,"index":95}}],"key":"nrBDtkRVez7cBhLzyaRjl+xVfvE=","exportNames":["*"],"imports":1}},{"name":"expo-device","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":96},"end":{"line":3,"column":38,"index":134}}],"key":"bBpmAhO1g++sdeUzQmFVGoQIVwg=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dV3bI3NOD8bfMzaIniMaFGy/nn8=","exportNames":["*"],"imports":1}},{"name":"../contexts/AuthContext","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":176},"end":{"line":5,"column":50,"index":226}}],"key":"oNCgyH4yx4pAIVZXLqqRGB2kuCY=","exportNames":["*"],"imports":1}},{"name":"firebase/firestore","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":227},"end":{"line":6,"column":49,"index":276}}],"key":"n8ZdwTgQb9oFW01pH/SKxYwC/nA=","exportNames":["*"],"imports":1}},{"name":"../config/firebase","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":7,"column":0,"index":277},"end":{"line":7,"column":40,"index":317}}],"key":"K/SZPG5sPeV1upVh8dao26aG7MQ=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.useNotifications = useNotifications;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _expoNotifications = require(_dependencyMap[1], \"expo-notifications\");\n  var Notifications = _interopNamespace(_expoNotifications);\n  var _expoDevice = require(_dependencyMap[2], \"expo-device\");\n  var Device = _interopNamespace(_expoDevice);\n  var _reactNativeWebDistExportsPlatform = require(_dependencyMap[3], \"react-native-web/dist/exports/Platform\");\n  var Platform = _interopDefault(_reactNativeWebDistExportsPlatform);\n  var _contextsAuthContext = require(_dependencyMap[4], \"../contexts/AuthContext\");\n  var _firebaseFirestore = require(_dependencyMap[5], \"firebase/firestore\");\n  var _configFirebase = require(_dependencyMap[6], \"../config/firebase\");\n  Notifications.setNotificationHandler({\n    handleNotification: async () => ({\n      shouldShowAlert: true,\n      shouldPlaySound: true,\n      shouldSetBadge: true\n    })\n  });\n  function useNotifications() {\n    const {\n      user\n    } = (0, _contextsAuthContext.useAuth)();\n    const notificationListener = (0, _react.useRef)();\n    const responseListener = (0, _react.useRef)();\n    (0, _react.useEffect)(() => {\n      registerForPushNotificationsAsync();\n      notificationListener.current = Notifications.addNotificationReceivedListener(notification => {\n        console.log('Notification received:', notification);\n      });\n      responseListener.current = Notifications.addNotificationResponseReceivedListener(response => {\n        console.log('Notification response:', response);\n      });\n      return () => {\n        Notifications.removeNotificationSubscription(notificationListener.current);\n        Notifications.removeNotificationSubscription(responseListener.current);\n      };\n    }, []);\n    const registerForPushNotificationsAsync = async () => {\n      if (!Device.isDevice) {\n        console.log('Must use physical device for Push Notifications');\n        return;\n      }\n      try {\n        const {\n          status: existingStatus\n        } = await Notifications.getPermissionsAsync();\n        let finalStatus = existingStatus;\n        if (existingStatus !== 'granted') {\n          const {\n            status\n          } = await Notifications.requestPermissionsAsync();\n          finalStatus = status;\n        }\n        if (finalStatus !== 'granted') {\n          console.log('Failed to get push token for push notification!');\n          return;\n        }\n        const token = (await Notifications.getExpoPushTokenAsync()).data;\n        console.log('Expo Push Token:', token);\n        if (user) {\n          await (0, _firebaseFirestore.setDoc)((0, _firebaseFirestore.doc)(_configFirebase.db, 'users', user.uid), {\n            pushToken: token,\n            updatedAt: new Date()\n          }, {\n            merge: true\n          });\n        }\n        if (Platform.default.OS === 'android') {\n          Notifications.setNotificationChannelAsync('default', {\n            name: 'default',\n            importance: Notifications.AndroidImportance.MAX,\n            vibrationPattern: [0, 250, 250, 250],\n            lightColor: '#FF231F7C'\n          });\n        }\n      } catch (error) {\n        console.log('Error registering for push notifications:', error);\n      }\n    };\n    const sendPushNotification = async (expoPushToken, title, body, data) => {\n      const message = {\n        to: expoPushToken,\n        sound: 'default',\n        title,\n        body,\n        data\n      };\n      await fetch('https://exp.host/--/api/v2/push/send', {\n        method: 'POST',\n        headers: {\n          Accept: 'application/json',\n          'Accept-encoding': 'gzip, deflate',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(message)\n      });\n    };\n    return {\n      sendPushNotification\n    };\n  }\n});","lineCount":128,"map":[[27,2,17,0,"exports"],[27,9,17,0],[27,10,17,0,"useNotifications"],[27,26,17,0],[27,29,17,0,"useNotifications"],[27,45,17,0],[28,2,1,0],[28,6,1,0,"_react"],[28,12,1,0],[28,15,1,0,"require"],[28,22,1,0],[28,23,1,0,"_dependencyMap"],[28,37,1,0],[29,2,2,0],[29,6,2,0,"_expoNotifications"],[29,24,2,0],[29,27,2,0,"require"],[29,34,2,0],[29,35,2,0,"_dependencyMap"],[29,49,2,0],[30,2,2,0],[30,6,2,0,"Notifications"],[30,19,2,0],[30,22,2,0,"_interopNamespace"],[30,39,2,0],[30,40,2,0,"_expoNotifications"],[30,58,2,0],[31,2,3,0],[31,6,3,0,"_expoDevice"],[31,17,3,0],[31,20,3,0,"require"],[31,27,3,0],[31,28,3,0,"_dependencyMap"],[31,42,3,0],[32,2,3,0],[32,6,3,0,"Device"],[32,12,3,0],[32,15,3,0,"_interopNamespace"],[32,32,3,0],[32,33,3,0,"_expoDevice"],[32,44,3,0],[33,2,3,38],[33,6,3,38,"_reactNativeWebDistExportsPlatform"],[33,40,3,38],[33,43,3,38,"require"],[33,50,3,38],[33,51,3,38,"_dependencyMap"],[33,65,3,38],[34,2,3,38],[34,6,3,38,"Platform"],[34,14,3,38],[34,17,3,38,"_interopDefault"],[34,32,3,38],[34,33,3,38,"_reactNativeWebDistExportsPlatform"],[34,67,3,38],[35,2,5,0],[35,6,5,0,"_contextsAuthContext"],[35,26,5,0],[35,29,5,0,"require"],[35,36,5,0],[35,37,5,0,"_dependencyMap"],[35,51,5,0],[36,2,6,0],[36,6,6,0,"_firebaseFirestore"],[36,24,6,0],[36,27,6,0,"require"],[36,34,6,0],[36,35,6,0,"_dependencyMap"],[36,49,6,0],[37,2,7,0],[37,6,7,0,"_configFirebase"],[37,21,7,0],[37,24,7,0,"require"],[37,31,7,0],[37,32,7,0,"_dependencyMap"],[37,46,7,0],[38,2,9,0,"Notifications"],[38,15,9,13],[38,16,9,14,"setNotificationHandler"],[38,38,9,36],[38,39,9,37],[39,4,10,2,"handleNotification"],[39,22,10,20],[39,24,10,22],[39,30,10,22,"handleNotification"],[39,31,10,22],[39,37,10,35],[40,6,11,4,"shouldShowAlert"],[40,21,11,19],[40,23,11,21],[40,27,11,25],[41,6,12,4,"shouldPlaySound"],[41,21,12,19],[41,23,12,21],[41,27,12,25],[42,6,13,4,"shouldSetBadge"],[42,20,13,18],[42,22,13,20],[43,4,14,2],[43,5,14,3],[44,2,15,0],[44,3,15,1],[44,4,15,2],[45,2,17,7],[45,11,17,16,"useNotifications"],[45,27,17,32,"useNotifications"],[45,28,17,32],[45,30,17,35],[46,4,18,2],[46,10,18,8],[47,6,18,10,"user"],[48,4,18,15],[48,5,18,16],[48,8,18,19],[48,12,18,19,"useAuth"],[48,32,18,26],[48,33,18,26,"useAuth"],[48,40,18,26],[48,42,18,27],[48,43,18,28],[49,4,19,2],[49,10,19,8,"notificationListener"],[49,30,19,28],[49,33,19,31],[49,37,19,31,"useRef"],[49,43,19,37],[49,44,19,37,"useRef"],[49,50,19,37],[49,52,19,43],[49,53,19,44],[50,4,20,2],[50,10,20,8,"responseListener"],[50,26,20,24],[50,29,20,27],[50,33,20,27,"useRef"],[50,39,20,33],[50,40,20,33,"useRef"],[50,46,20,33],[50,48,20,39],[50,49,20,40],[51,4,22,2],[51,8,22,2,"useEffect"],[51,14,22,11],[51,15,22,11,"useEffect"],[51,24,22,11],[51,26,22,12],[51,32,22,18],[52,6,23,4,"registerForPushNotificationsAsync"],[52,39,23,37],[52,40,23,38],[52,41,23,39],[53,6,25,4,"notificationListener"],[53,26,25,24],[53,27,25,25,"current"],[53,34,25,32],[53,37,25,35,"Notifications"],[53,50,25,48],[53,51,25,49,"addNotificationReceivedListener"],[53,82,25,80],[53,83,25,81,"notification"],[53,95,25,93],[53,99,25,97],[54,8,26,6,"console"],[54,15,26,13],[54,16,26,14,"log"],[54,19,26,17],[54,20,26,18],[54,44,26,42],[54,46,26,44,"notification"],[54,58,26,56],[54,59,26,57],[55,6,27,4],[55,7,27,5],[55,8,27,6],[56,6,29,4,"responseListener"],[56,22,29,20],[56,23,29,21,"current"],[56,30,29,28],[56,33,29,31,"Notifications"],[56,46,29,44],[56,47,29,45,"addNotificationResponseReceivedListener"],[56,86,29,84],[56,87,29,85,"response"],[56,95,29,93],[56,99,29,97],[57,8,30,6,"console"],[57,15,30,13],[57,16,30,14,"log"],[57,19,30,17],[57,20,30,18],[57,44,30,42],[57,46,30,44,"response"],[57,54,30,52],[57,55,30,53],[58,6,31,4],[58,7,31,5],[58,8,31,6],[59,6,33,4],[59,13,33,11],[59,19,33,17],[60,8,34,6,"Notifications"],[60,21,34,19],[60,22,34,20,"removeNotificationSubscription"],[60,52,34,50],[60,53,34,51,"notificationListener"],[60,73,34,71],[60,74,34,72,"current"],[60,81,34,79],[60,82,34,80],[61,8,35,6,"Notifications"],[61,21,35,19],[61,22,35,20,"removeNotificationSubscription"],[61,52,35,50],[61,53,35,51,"responseListener"],[61,69,35,67],[61,70,35,68,"current"],[61,77,35,75],[61,78,35,76],[62,6,36,4],[62,7,36,5],[63,4,37,2],[63,5,37,3],[63,7,37,5],[63,9,37,7],[63,10,37,8],[64,4,39,2],[64,10,39,8,"registerForPushNotificationsAsync"],[64,43,39,41],[64,46,39,44],[64,52,39,44,"registerForPushNotificationsAsync"],[64,53,39,44],[64,58,39,56],[65,6,40,4],[65,10,40,8],[65,11,40,9,"Device"],[65,17,40,15],[65,18,40,16,"isDevice"],[65,26,40,24],[65,28,40,26],[66,8,41,6,"console"],[66,15,41,13],[66,16,41,14,"log"],[66,19,41,17],[66,20,41,18],[66,69,41,67],[66,70,41,68],[67,8,42,6],[68,6,43,4],[69,6,45,4],[69,10,45,8],[70,8,46,6],[70,14,46,12],[71,10,46,14,"status"],[71,16,46,20],[71,18,46,22,"existingStatus"],[72,8,46,37],[72,9,46,38],[72,12,46,41],[72,18,46,47,"Notifications"],[72,31,46,60],[72,32,46,61,"getPermissionsAsync"],[72,51,46,80],[72,52,46,81],[72,53,46,82],[73,8,47,6],[73,12,47,10,"finalStatus"],[73,23,47,21],[73,26,47,24,"existingStatus"],[73,40,47,38],[74,8,49,6],[74,12,49,10,"existingStatus"],[74,26,49,24],[74,31,49,29],[74,40,49,38],[74,42,49,40],[75,10,50,8],[75,16,50,14],[76,12,50,16,"status"],[77,10,50,23],[77,11,50,24],[77,14,50,27],[77,20,50,33,"Notifications"],[77,33,50,46],[77,34,50,47,"requestPermissionsAsync"],[77,57,50,70],[77,58,50,71],[77,59,50,72],[78,10,51,8,"finalStatus"],[78,21,51,19],[78,24,51,22,"status"],[78,30,51,28],[79,8,52,6],[80,8,54,6],[80,12,54,10,"finalStatus"],[80,23,54,21],[80,28,54,26],[80,37,54,35],[80,39,54,37],[81,10,55,8,"console"],[81,17,55,15],[81,18,55,16,"log"],[81,21,55,19],[81,22,55,20],[81,71,55,69],[81,72,55,70],[82,10,56,8],[83,8,57,6],[84,8,59,6],[84,14,59,12,"token"],[84,19,59,17],[84,22,59,20],[84,23,59,21],[84,29,59,27,"Notifications"],[84,42,59,40],[84,43,59,41,"getExpoPushTokenAsync"],[84,64,59,62],[84,65,59,63],[84,66,59,64],[84,68,59,66,"data"],[84,72,59,70],[85,8,60,6,"console"],[85,15,60,13],[85,16,60,14,"log"],[85,19,60,17],[85,20,60,18],[85,38,60,36],[85,40,60,38,"token"],[85,45,60,43],[85,46,60,44],[86,8,62,6],[86,12,62,10,"user"],[86,16,62,14],[86,18,62,16],[87,10,63,8],[87,16,63,14],[87,20,63,14,"setDoc"],[87,38,63,20],[87,39,63,20,"setDoc"],[87,45,63,20],[87,47,64,10],[87,51,64,10,"doc"],[87,69,64,13],[87,70,64,13,"doc"],[87,73,64,13],[87,75,64,14,"db"],[87,90,64,16],[87,91,64,16,"db"],[87,93,64,16],[87,95,64,18],[87,102,64,25],[87,104,64,27,"user"],[87,108,64,31],[87,109,64,32,"uid"],[87,112,64,35],[87,113,64,36],[87,115,65,10],[88,12,65,12,"pushToken"],[88,21,65,21],[88,23,65,23,"token"],[88,28,65,28],[89,12,65,30,"updatedAt"],[89,21,65,39],[89,23,65,41],[89,27,65,45,"Date"],[89,31,65,49],[89,32,65,50],[90,10,65,52],[90,11,65,53],[90,13,66,10],[91,12,66,12,"merge"],[91,17,66,17],[91,19,66,19],[92,10,66,24],[92,11,67,8],[92,12,67,9],[93,8,68,6],[94,8,70,6],[94,12,70,10,"Platform"],[94,20,70,18],[94,21,70,18,"default"],[94,28,70,18],[94,29,70,19,"OS"],[94,31,70,21],[94,36,70,26],[94,45,70,35],[94,47,70,37],[95,10,71,8,"Notifications"],[95,23,71,21],[95,24,71,22,"setNotificationChannelAsync"],[95,51,71,49],[95,52,71,50],[95,61,71,59],[95,63,71,61],[96,12,72,10,"name"],[96,16,72,14],[96,18,72,16],[96,27,72,25],[97,12,73,10,"importance"],[97,22,73,20],[97,24,73,22,"Notifications"],[97,37,73,35],[97,38,73,36,"AndroidImportance"],[97,55,73,53],[97,56,73,54,"MAX"],[97,59,73,57],[98,12,74,10,"vibrationPattern"],[98,28,74,26],[98,30,74,28],[98,31,74,29],[98,32,74,30],[98,34,74,32],[98,37,74,35],[98,39,74,37],[98,42,74,40],[98,44,74,42],[98,47,74,45],[98,48,74,46],[99,12,75,10,"lightColor"],[99,22,75,20],[99,24,75,22],[100,10,76,8],[100,11,76,9],[100,12,76,10],[101,8,77,6],[102,6,78,4],[102,7,78,5],[102,8,78,6],[102,15,78,13,"error"],[102,20,78,18],[102,22,78,20],[103,8,79,6,"console"],[103,15,79,13],[103,16,79,14,"log"],[103,19,79,17],[103,20,79,18],[103,63,79,61],[103,65,79,63,"error"],[103,70,79,68],[103,71,79,69],[104,6,80,4],[105,4,81,2],[105,5,81,3],[106,4,83,2],[106,10,83,8,"sendPushNotification"],[106,30,83,28],[106,33,83,31],[106,39,83,31,"sendPushNotification"],[106,40,83,38,"expoPushToken"],[106,53,83,59],[106,55,83,61,"title"],[106,60,83,74],[106,62,83,76,"body"],[106,66,83,88],[106,68,83,90,"data"],[106,72,83,100],[106,77,83,105],[107,6,84,4],[107,12,84,10,"message"],[107,19,84,17],[107,22,84,20],[108,8,85,6,"to"],[108,10,85,8],[108,12,85,10,"expoPushToken"],[108,25,85,23],[109,8,86,6,"sound"],[109,13,86,11],[109,15,86,13],[109,24,86,22],[110,8,87,6,"title"],[110,13,87,11],[111,8,88,6,"body"],[111,12,88,10],[112,8,89,6,"data"],[113,6,90,4],[113,7,90,5],[114,6,92,4],[114,12,92,10,"fetch"],[114,17,92,15],[114,18,92,16],[114,56,92,54],[114,58,92,56],[115,8,93,6,"method"],[115,14,93,12],[115,16,93,14],[115,22,93,20],[116,8,94,6,"headers"],[116,15,94,13],[116,17,94,15],[117,10,95,8,"Accept"],[117,16,95,14],[117,18,95,16],[117,36,95,34],[118,10,96,8],[118,27,96,25],[118,29,96,27],[118,44,96,42],[119,10,97,8],[119,24,97,22],[119,26,97,24],[120,8,98,6],[120,9,98,7],[121,8,99,6,"body"],[121,12,99,10],[121,14,99,12,"JSON"],[121,18,99,16],[121,19,99,17,"stringify"],[121,28,99,26],[121,29,99,27,"message"],[121,36,99,34],[122,6,100,4],[122,7,100,5],[122,8,100,6],[123,4,101,2],[123,5,101,3],[124,4,103,2],[124,11,103,9],[125,6,103,11,"sendPushNotification"],[126,4,103,32],[126,5,103,33],[127,2,104,0],[128,0,104,1],[128,3]],"functionMap":{"names":["<global>","Notifications.setNotificationHandler$argument_0.handleNotification","useNotifications","useEffect$argument_0","Notifications.addNotificationReceivedListener$argument_0","Notifications.addNotificationResponseReceivedListener$argument_0","<anonymous>","registerForPushNotificationsAsync","sendPushNotification"],"mappings":"AAA;sBCS;IDI;OEG;YCK;iFCG;KDE;qFEE;KFE;WGE;KHG;GDC;4CKE;GL0C;+BME;GNkB"},"hasCjsExports":false},"type":"js/module"}]}