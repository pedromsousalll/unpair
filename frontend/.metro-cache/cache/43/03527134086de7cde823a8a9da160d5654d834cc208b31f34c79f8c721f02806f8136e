{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":42,"index":42}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"expo-notifications","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":43},"end":{"line":2,"column":52,"index":95}}],"key":"nrBDtkRVez7cBhLzyaRjl+xVfvE=","exportNames":["*"],"imports":1}},{"name":"expo-device","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":96},"end":{"line":3,"column":38,"index":134}}],"key":"bBpmAhO1g++sdeUzQmFVGoQIVwg=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dV3bI3NOD8bfMzaIniMaFGy/nn8=","exportNames":["*"],"imports":1}},{"name":"../contexts/AuthContext","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":176},"end":{"line":5,"column":50,"index":226}}],"key":"oNCgyH4yx4pAIVZXLqqRGB2kuCY=","exportNames":["*"],"imports":1}},{"name":"firebase/firestore","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":227},"end":{"line":6,"column":49,"index":276}}],"key":"n8ZdwTgQb9oFW01pH/SKxYwC/nA=","exportNames":["*"],"imports":1}},{"name":"../config/firebase","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":7,"column":0,"index":277},"end":{"line":7,"column":40,"index":317}}],"key":"K/SZPG5sPeV1upVh8dao26aG7MQ=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.useNotifications = useNotifications;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _expoNotifications = require(_dependencyMap[1], \"expo-notifications\");\n  var Notifications = _interopNamespace(_expoNotifications);\n  var _expoDevice = require(_dependencyMap[2], \"expo-device\");\n  var Device = _interopNamespace(_expoDevice);\n  var _reactNativeWebDistExportsPlatform = require(_dependencyMap[3], \"react-native-web/dist/exports/Platform\");\n  var Platform = _interopDefault(_reactNativeWebDistExportsPlatform);\n  var _contextsAuthContext = require(_dependencyMap[4], \"../contexts/AuthContext\");\n  var _firebaseFirestore = require(_dependencyMap[5], \"firebase/firestore\");\n  var _configFirebase = require(_dependencyMap[6], \"../config/firebase\");\n  Notifications.setNotificationHandler({\n    handleNotification: async () => ({\n      shouldShowAlert: true,\n      shouldPlaySound: true,\n      shouldSetBadge: true\n    })\n  });\n  function useNotifications() {\n    const {\n      user\n    } = (0, _contextsAuthContext.useAuth)();\n    const notificationListener = (0, _react.useRef)();\n    const responseListener = (0, _react.useRef)();\n    (0, _react.useEffect)(() => {\n      registerForPushNotificationsAsync();\n      notificationListener.current = Notifications.addNotificationReceivedListener(notification => {\n        console.log('Notification received:', notification);\n      });\n      responseListener.current = Notifications.addNotificationResponseReceivedListener(response => {\n        console.log('Notification response:', response);\n      });\n      return () => {\n        if (notificationListener.current) {\n          notificationListener.current.remove();\n        }\n        if (responseListener.current) {\n          responseListener.current.remove();\n        }\n      };\n    }, []);\n    const registerForPushNotificationsAsync = async () => {\n      if (!Device.isDevice) {\n        console.log('Must use physical device for Push Notifications');\n        return;\n      }\n      try {\n        const {\n          status: existingStatus\n        } = await Notifications.getPermissionsAsync();\n        let finalStatus = existingStatus;\n        if (existingStatus !== 'granted') {\n          const {\n            status\n          } = await Notifications.requestPermissionsAsync();\n          finalStatus = status;\n        }\n        if (finalStatus !== 'granted') {\n          console.log('Failed to get push token for push notification!');\n          return;\n        }\n        const token = (await Notifications.getExpoPushTokenAsync()).data;\n        console.log('Expo Push Token:', token);\n        if (user) {\n          await (0, _firebaseFirestore.setDoc)((0, _firebaseFirestore.doc)(_configFirebase.db, 'users', user.uid), {\n            pushToken: token,\n            updatedAt: new Date()\n          }, {\n            merge: true\n          });\n        }\n        if (Platform.default.OS === 'android') {\n          Notifications.setNotificationChannelAsync('default', {\n            name: 'default',\n            importance: Notifications.AndroidImportance.MAX,\n            vibrationPattern: [0, 250, 250, 250],\n            lightColor: '#FF231F7C'\n          });\n        }\n      } catch (error) {\n        console.log('Error registering for push notifications:', error);\n      }\n    };\n    const sendPushNotification = async (expoPushToken, title, body, data) => {\n      const message = {\n        to: expoPushToken,\n        sound: 'default',\n        title,\n        body,\n        data\n      };\n      await fetch('https://exp.host/--/api/v2/push/send', {\n        method: 'POST',\n        headers: {\n          Accept: 'application/json',\n          'Accept-encoding': 'gzip, deflate',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(message)\n      });\n    };\n    return {\n      sendPushNotification\n    };\n  }\n});","lineCount":132,"map":[[27,2,17,0,"exports"],[27,9,17,0],[27,10,17,0,"useNotifications"],[27,26,17,0],[27,29,17,0,"useNotifications"],[27,45,17,0],[28,2,1,0],[28,6,1,0,"_react"],[28,12,1,0],[28,15,1,0,"require"],[28,22,1,0],[28,23,1,0,"_dependencyMap"],[28,37,1,0],[29,2,2,0],[29,6,2,0,"_expoNotifications"],[29,24,2,0],[29,27,2,0,"require"],[29,34,2,0],[29,35,2,0,"_dependencyMap"],[29,49,2,0],[30,2,2,0],[30,6,2,0,"Notifications"],[30,19,2,0],[30,22,2,0,"_interopNamespace"],[30,39,2,0],[30,40,2,0,"_expoNotifications"],[30,58,2,0],[31,2,3,0],[31,6,3,0,"_expoDevice"],[31,17,3,0],[31,20,3,0,"require"],[31,27,3,0],[31,28,3,0,"_dependencyMap"],[31,42,3,0],[32,2,3,0],[32,6,3,0,"Device"],[32,12,3,0],[32,15,3,0,"_interopNamespace"],[32,32,3,0],[32,33,3,0,"_expoDevice"],[32,44,3,0],[33,2,3,38],[33,6,3,38,"_reactNativeWebDistExportsPlatform"],[33,40,3,38],[33,43,3,38,"require"],[33,50,3,38],[33,51,3,38,"_dependencyMap"],[33,65,3,38],[34,2,3,38],[34,6,3,38,"Platform"],[34,14,3,38],[34,17,3,38,"_interopDefault"],[34,32,3,38],[34,33,3,38,"_reactNativeWebDistExportsPlatform"],[34,67,3,38],[35,2,5,0],[35,6,5,0,"_contextsAuthContext"],[35,26,5,0],[35,29,5,0,"require"],[35,36,5,0],[35,37,5,0,"_dependencyMap"],[35,51,5,0],[36,2,6,0],[36,6,6,0,"_firebaseFirestore"],[36,24,6,0],[36,27,6,0,"require"],[36,34,6,0],[36,35,6,0,"_dependencyMap"],[36,49,6,0],[37,2,7,0],[37,6,7,0,"_configFirebase"],[37,21,7,0],[37,24,7,0,"require"],[37,31,7,0],[37,32,7,0,"_dependencyMap"],[37,46,7,0],[38,2,9,0,"Notifications"],[38,15,9,13],[38,16,9,14,"setNotificationHandler"],[38,38,9,36],[38,39,9,37],[39,4,10,2,"handleNotification"],[39,22,10,20],[39,24,10,22],[39,30,10,22,"handleNotification"],[39,31,10,22],[39,37,10,35],[40,6,11,4,"shouldShowAlert"],[40,21,11,19],[40,23,11,21],[40,27,11,25],[41,6,12,4,"shouldPlaySound"],[41,21,12,19],[41,23,12,21],[41,27,12,25],[42,6,13,4,"shouldSetBadge"],[42,20,13,18],[42,22,13,20],[43,4,14,2],[43,5,14,3],[44,2,15,0],[44,3,15,1],[44,4,15,2],[45,2,17,7],[45,11,17,16,"useNotifications"],[45,27,17,32,"useNotifications"],[45,28,17,32],[45,30,17,35],[46,4,18,2],[46,10,18,8],[47,6,18,10,"user"],[48,4,18,15],[48,5,18,16],[48,8,18,19],[48,12,18,19,"useAuth"],[48,32,18,26],[48,33,18,26,"useAuth"],[48,40,18,26],[48,42,18,27],[48,43,18,28],[49,4,19,2],[49,10,19,8,"notificationListener"],[49,30,19,28],[49,33,19,31],[49,37,19,31,"useRef"],[49,43,19,37],[49,44,19,37,"useRef"],[49,50,19,37],[49,52,19,43],[49,53,19,44],[50,4,20,2],[50,10,20,8,"responseListener"],[50,26,20,24],[50,29,20,27],[50,33,20,27,"useRef"],[50,39,20,33],[50,40,20,33,"useRef"],[50,46,20,33],[50,48,20,39],[50,49,20,40],[51,4,22,2],[51,8,22,2,"useEffect"],[51,14,22,11],[51,15,22,11,"useEffect"],[51,24,22,11],[51,26,22,12],[51,32,22,18],[52,6,23,4,"registerForPushNotificationsAsync"],[52,39,23,37],[52,40,23,38],[52,41,23,39],[53,6,25,4,"notificationListener"],[53,26,25,24],[53,27,25,25,"current"],[53,34,25,32],[53,37,25,35,"Notifications"],[53,50,25,48],[53,51,25,49,"addNotificationReceivedListener"],[53,82,25,80],[53,83,25,81,"notification"],[53,95,25,93],[53,99,25,97],[54,8,26,6,"console"],[54,15,26,13],[54,16,26,14,"log"],[54,19,26,17],[54,20,26,18],[54,44,26,42],[54,46,26,44,"notification"],[54,58,26,56],[54,59,26,57],[55,6,27,4],[55,7,27,5],[55,8,27,6],[56,6,29,4,"responseListener"],[56,22,29,20],[56,23,29,21,"current"],[56,30,29,28],[56,33,29,31,"Notifications"],[56,46,29,44],[56,47,29,45,"addNotificationResponseReceivedListener"],[56,86,29,84],[56,87,29,85,"response"],[56,95,29,93],[56,99,29,97],[57,8,30,6,"console"],[57,15,30,13],[57,16,30,14,"log"],[57,19,30,17],[57,20,30,18],[57,44,30,42],[57,46,30,44,"response"],[57,54,30,52],[57,55,30,53],[58,6,31,4],[58,7,31,5],[58,8,31,6],[59,6,33,4],[59,13,33,11],[59,19,33,17],[60,8,34,6],[60,12,34,10,"notificationListener"],[60,32,34,30],[60,33,34,31,"current"],[60,40,34,38],[60,42,34,40],[61,10,35,8,"notificationListener"],[61,30,35,28],[61,31,35,29,"current"],[61,38,35,36],[61,39,35,37,"remove"],[61,45,35,43],[61,46,35,44],[61,47,35,45],[62,8,36,6],[63,8,37,6],[63,12,37,10,"responseListener"],[63,28,37,26],[63,29,37,27,"current"],[63,36,37,34],[63,38,37,36],[64,10,38,8,"responseListener"],[64,26,38,24],[64,27,38,25,"current"],[64,34,38,32],[64,35,38,33,"remove"],[64,41,38,39],[64,42,38,40],[64,43,38,41],[65,8,39,6],[66,6,40,4],[66,7,40,5],[67,4,41,2],[67,5,41,3],[67,7,41,5],[67,9,41,7],[67,10,41,8],[68,4,43,2],[68,10,43,8,"registerForPushNotificationsAsync"],[68,43,43,41],[68,46,43,44],[68,52,43,44,"registerForPushNotificationsAsync"],[68,53,43,44],[68,58,43,56],[69,6,44,4],[69,10,44,8],[69,11,44,9,"Device"],[69,17,44,15],[69,18,44,16,"isDevice"],[69,26,44,24],[69,28,44,26],[70,8,45,6,"console"],[70,15,45,13],[70,16,45,14,"log"],[70,19,45,17],[70,20,45,18],[70,69,45,67],[70,70,45,68],[71,8,46,6],[72,6,47,4],[73,6,49,4],[73,10,49,8],[74,8,50,6],[74,14,50,12],[75,10,50,14,"status"],[75,16,50,20],[75,18,50,22,"existingStatus"],[76,8,50,37],[76,9,50,38],[76,12,50,41],[76,18,50,47,"Notifications"],[76,31,50,60],[76,32,50,61,"getPermissionsAsync"],[76,51,50,80],[76,52,50,81],[76,53,50,82],[77,8,51,6],[77,12,51,10,"finalStatus"],[77,23,51,21],[77,26,51,24,"existingStatus"],[77,40,51,38],[78,8,53,6],[78,12,53,10,"existingStatus"],[78,26,53,24],[78,31,53,29],[78,40,53,38],[78,42,53,40],[79,10,54,8],[79,16,54,14],[80,12,54,16,"status"],[81,10,54,23],[81,11,54,24],[81,14,54,27],[81,20,54,33,"Notifications"],[81,33,54,46],[81,34,54,47,"requestPermissionsAsync"],[81,57,54,70],[81,58,54,71],[81,59,54,72],[82,10,55,8,"finalStatus"],[82,21,55,19],[82,24,55,22,"status"],[82,30,55,28],[83,8,56,6],[84,8,58,6],[84,12,58,10,"finalStatus"],[84,23,58,21],[84,28,58,26],[84,37,58,35],[84,39,58,37],[85,10,59,8,"console"],[85,17,59,15],[85,18,59,16,"log"],[85,21,59,19],[85,22,59,20],[85,71,59,69],[85,72,59,70],[86,10,60,8],[87,8,61,6],[88,8,63,6],[88,14,63,12,"token"],[88,19,63,17],[88,22,63,20],[88,23,63,21],[88,29,63,27,"Notifications"],[88,42,63,40],[88,43,63,41,"getExpoPushTokenAsync"],[88,64,63,62],[88,65,63,63],[88,66,63,64],[88,68,63,66,"data"],[88,72,63,70],[89,8,64,6,"console"],[89,15,64,13],[89,16,64,14,"log"],[89,19,64,17],[89,20,64,18],[89,38,64,36],[89,40,64,38,"token"],[89,45,64,43],[89,46,64,44],[90,8,66,6],[90,12,66,10,"user"],[90,16,66,14],[90,18,66,16],[91,10,67,8],[91,16,67,14],[91,20,67,14,"setDoc"],[91,38,67,20],[91,39,67,20,"setDoc"],[91,45,67,20],[91,47,68,10],[91,51,68,10,"doc"],[91,69,68,13],[91,70,68,13,"doc"],[91,73,68,13],[91,75,68,14,"db"],[91,90,68,16],[91,91,68,16,"db"],[91,93,68,16],[91,95,68,18],[91,102,68,25],[91,104,68,27,"user"],[91,108,68,31],[91,109,68,32,"uid"],[91,112,68,35],[91,113,68,36],[91,115,69,10],[92,12,69,12,"pushToken"],[92,21,69,21],[92,23,69,23,"token"],[92,28,69,28],[93,12,69,30,"updatedAt"],[93,21,69,39],[93,23,69,41],[93,27,69,45,"Date"],[93,31,69,49],[93,32,69,50],[94,10,69,52],[94,11,69,53],[94,13,70,10],[95,12,70,12,"merge"],[95,17,70,17],[95,19,70,19],[96,10,70,24],[96,11,71,8],[96,12,71,9],[97,8,72,6],[98,8,74,6],[98,12,74,10,"Platform"],[98,20,74,18],[98,21,74,18,"default"],[98,28,74,18],[98,29,74,19,"OS"],[98,31,74,21],[98,36,74,26],[98,45,74,35],[98,47,74,37],[99,10,75,8,"Notifications"],[99,23,75,21],[99,24,75,22,"setNotificationChannelAsync"],[99,51,75,49],[99,52,75,50],[99,61,75,59],[99,63,75,61],[100,12,76,10,"name"],[100,16,76,14],[100,18,76,16],[100,27,76,25],[101,12,77,10,"importance"],[101,22,77,20],[101,24,77,22,"Notifications"],[101,37,77,35],[101,38,77,36,"AndroidImportance"],[101,55,77,53],[101,56,77,54,"MAX"],[101,59,77,57],[102,12,78,10,"vibrationPattern"],[102,28,78,26],[102,30,78,28],[102,31,78,29],[102,32,78,30],[102,34,78,32],[102,37,78,35],[102,39,78,37],[102,42,78,40],[102,44,78,42],[102,47,78,45],[102,48,78,46],[103,12,79,10,"lightColor"],[103,22,79,20],[103,24,79,22],[104,10,80,8],[104,11,80,9],[104,12,80,10],[105,8,81,6],[106,6,82,4],[106,7,82,5],[106,8,82,6],[106,15,82,13,"error"],[106,20,82,18],[106,22,82,20],[107,8,83,6,"console"],[107,15,83,13],[107,16,83,14,"log"],[107,19,83,17],[107,20,83,18],[107,63,83,61],[107,65,83,63,"error"],[107,70,83,68],[107,71,83,69],[108,6,84,4],[109,4,85,2],[109,5,85,3],[110,4,87,2],[110,10,87,8,"sendPushNotification"],[110,30,87,28],[110,33,87,31],[110,39,87,31,"sendPushNotification"],[110,40,87,38,"expoPushToken"],[110,53,87,59],[110,55,87,61,"title"],[110,60,87,74],[110,62,87,76,"body"],[110,66,87,88],[110,68,87,90,"data"],[110,72,87,100],[110,77,87,105],[111,6,88,4],[111,12,88,10,"message"],[111,19,88,17],[111,22,88,20],[112,8,89,6,"to"],[112,10,89,8],[112,12,89,10,"expoPushToken"],[112,25,89,23],[113,8,90,6,"sound"],[113,13,90,11],[113,15,90,13],[113,24,90,22],[114,8,91,6,"title"],[114,13,91,11],[115,8,92,6,"body"],[115,12,92,10],[116,8,93,6,"data"],[117,6,94,4],[117,7,94,5],[118,6,96,4],[118,12,96,10,"fetch"],[118,17,96,15],[118,18,96,16],[118,56,96,54],[118,58,96,56],[119,8,97,6,"method"],[119,14,97,12],[119,16,97,14],[119,22,97,20],[120,8,98,6,"headers"],[120,15,98,13],[120,17,98,15],[121,10,99,8,"Accept"],[121,16,99,14],[121,18,99,16],[121,36,99,34],[122,10,100,8],[122,27,100,25],[122,29,100,27],[122,44,100,42],[123,10,101,8],[123,24,101,22],[123,26,101,24],[124,8,102,6],[124,9,102,7],[125,8,103,6,"body"],[125,12,103,10],[125,14,103,12,"JSON"],[125,18,103,16],[125,19,103,17,"stringify"],[125,28,103,26],[125,29,103,27,"message"],[125,36,103,34],[126,6,104,4],[126,7,104,5],[126,8,104,6],[127,4,105,2],[127,5,105,3],[128,4,107,2],[128,11,107,9],[129,6,107,11,"sendPushNotification"],[130,4,107,32],[130,5,107,33],[131,2,108,0],[132,0,108,1],[132,3]],"functionMap":{"names":["<global>","Notifications.setNotificationHandler$argument_0.handleNotification","useNotifications","useEffect$argument_0","Notifications.addNotificationReceivedListener$argument_0","Notifications.addNotificationResponseReceivedListener$argument_0","<anonymous>","registerForPushNotificationsAsync","sendPushNotification"],"mappings":"AAA;sBCS;IDI;OEG;YCK;iFCG;KDE;qFEE;KFE;WGE;KHO;GDC;4CKE;GL0C;+BME;GNkB"},"hasCjsExports":false},"type":"js/module"}]}