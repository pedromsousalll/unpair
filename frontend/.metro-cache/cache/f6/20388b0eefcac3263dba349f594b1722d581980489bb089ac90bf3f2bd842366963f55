{"dependencies":[{"name":"./getScrollParent.mjs","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":99,"index":99}}],"key":"ZAgGVBwa+300wsj8mPFrJjtswMI=","exportNames":["*"],"imports":1}},{"name":"./useEffectEvent.mjs","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":100},"end":{"line":2,"column":97,"index":197}}],"key":"/dJDBzknau+iZVrdonR9UZbw8Yw=","exportNames":["*"],"imports":1}},{"name":"./useLayoutEffect.mjs","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":198},"end":{"line":3,"column":99,"index":297}}],"key":"oK3260rJ5SwRPMPILNPRW6WgUE8=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":298},"end":{"line":4,"column":46,"index":344}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"useLoadMoreSentinel\", {\n    enumerable: true,\n    get: function () {\n      return $a5fa973c1850dd36$export$ccaea96c28e8b9e7;\n    }\n  });\n  var _getScrollParentMjs = require(_dependencyMap[0], \"./getScrollParent.mjs\");\n  var _useEffectEventMjs = require(_dependencyMap[1], \"./useEffectEvent.mjs\");\n  var _useLayoutEffectMjs = require(_dependencyMap[2], \"./useLayoutEffect.mjs\");\n  var _react = require(_dependencyMap[3], \"react\");\n  /*\n   * Copyright 2024 Adobe. All rights reserved.\n   * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License. You may obtain a copy\n   * of the License at http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software distributed under\n   * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n   * OF ANY KIND, either express or implied. See the License for the specific language\n   * governing permissions and limitations under the License.\n   */\n\n  function $a5fa973c1850dd36$export$ccaea96c28e8b9e7(props, ref) {\n    let {\n      collection: collection,\n      onLoadMore: onLoadMore,\n      scrollOffset = 1\n    } = props;\n    let sentinelObserver = (0, _react.useRef)(null);\n    let triggerLoadMore = (0, _useEffectEventMjs.useEffectEvent)(entries => {\n      // Use \"isIntersecting\" over an equality check of 0 since it seems like there is cases where\n      // a intersection ratio of 0 can be reported when isIntersecting is actually true\n      for (let entry of entries)\n      // Note that this will be called if the collection changes, even if onLoadMore was already called and is being processed.\n      // Up to user discretion as to how to handle these multiple onLoadMore calls\n      if (entry.isIntersecting && onLoadMore) onLoadMore();\n    });\n    (0, _useLayoutEffectMjs.useLayoutEffect)(() => {\n      if (ref.current) {\n        // Tear down and set up a new IntersectionObserver when the collection changes so that we can properly trigger additional loadMores if there is room for more items\n        // Need to do this tear down and set up since using a large rootMargin will mean the observer's callback isn't called even when scrolling the item into view beause its visibility hasn't actually changed\n        // https://codesandbox.io/p/sandbox/magical-swanson-dhgp89?file=%2Fsrc%2FApp.js%3A21%2C21\n        sentinelObserver.current = new IntersectionObserver(triggerLoadMore, {\n          root: (0, _getScrollParentMjs.getScrollParent)(ref === null || ref === void 0 ? void 0 : ref.current),\n          rootMargin: `0px ${100 * scrollOffset}% ${100 * scrollOffset}% ${100 * scrollOffset}%`\n        });\n        sentinelObserver.current.observe(ref.current);\n      }\n      return () => {\n        if (sentinelObserver.current) sentinelObserver.current.disconnect();\n      };\n    }, [collection, triggerLoadMore, ref, scrollOffset]);\n  }\n});","lineCount":60,"map":[[7,2,53,0,"Object"],[7,8,53,0],[7,9,53,0,"defineProperty"],[7,23,53,0],[7,24,53,0,"exports"],[7,31,53,0],[8,4,53,0,"enumerable"],[8,14,53,0],[9,4,53,0,"get"],[9,7,53,0],[9,18,53,0,"get"],[9,19,53,0],[10,6,53,0],[10,13,53,8,"$a5fa973c1850dd36$export$ccaea96c28e8b9e7"],[10,54,53,49],[11,4,53,49],[12,2,53,49],[13,2,1,0],[13,6,1,0,"_getScrollParentMjs"],[13,25,1,0],[13,28,1,0,"require"],[13,35,1,0],[13,36,1,0,"_dependencyMap"],[13,50,1,0],[14,2,2,0],[14,6,2,0,"_useEffectEventMjs"],[14,24,2,0],[14,27,2,0,"require"],[14,34,2,0],[14,35,2,0,"_dependencyMap"],[14,49,2,0],[15,2,3,0],[15,6,3,0,"_useLayoutEffectMjs"],[15,25,3,0],[15,28,3,0,"require"],[15,35,3,0],[15,36,3,0,"_dependencyMap"],[15,50,3,0],[16,2,4,0],[16,6,4,0,"_react"],[16,12,4,0],[16,15,4,0,"require"],[16,22,4,0],[16,23,4,0,"_dependencyMap"],[16,37,4,0],[17,2,6,0],[18,0,7,0],[19,0,8,0],[20,0,9,0],[21,0,10,0],[22,0,11,0],[23,0,12,0],[24,0,13,0],[25,0,14,0],[26,0,15,0],[27,0,16,0],[29,2,20,0],[29,11,20,9,"$a5fa973c1850dd36$export$ccaea96c28e8b9e7"],[29,52,20,50,"$a5fa973c1850dd36$export$ccaea96c28e8b9e7"],[29,53,20,51,"props"],[29,58,20,56],[29,60,20,58,"ref"],[29,63,20,61],[29,65,20,63],[30,4,21,4],[30,8,21,8],[31,6,21,10,"collection"],[31,16,21,20],[31,18,21,22,"collection"],[31,28,21,32],[32,6,21,34,"onLoadMore"],[32,16,21,44],[32,18,21,46,"onLoadMore"],[32,28,21,56],[33,6,21,72,"scrollOffset"],[33,18,21,84],[33,21,21,87],[34,4,21,89],[34,5,21,90],[34,8,21,93,"props"],[34,13,21,98],[35,4,22,4],[35,8,22,8,"sentinelObserver"],[35,24,22,24],[35,27,22,27],[35,28,22,28],[35,29,22,29],[35,31,22,31,"$7FoZl$useRef"],[35,37,22,44],[35,38,22,44,"useRef"],[35,44,22,44],[35,46,22,46],[35,50,22,50],[35,51,22,51],[36,4,23,4],[36,8,23,8,"triggerLoadMore"],[36,23,23,23],[36,26,23,26],[36,27,23,27],[36,28,23,28],[36,30,23,30,"$8ae05eaa5c114e9c$export$7f54fc3180508a52"],[36,48,23,71],[36,49,23,71,"useEffectEvent"],[36,63,23,71],[36,65,23,74,"entries"],[36,72,23,81],[36,76,23,84],[37,6,24,8],[38,6,25,8],[39,6,26,8],[39,11,26,13],[39,15,26,17,"entry"],[39,20,26,22],[39,24,26,26,"entries"],[39,31,26,33],[40,6,26,34],[41,6,27,8],[42,6,28,8],[42,10,28,12,"entry"],[42,15,28,17],[42,16,28,18,"isIntersecting"],[42,30,28,32],[42,34,28,36,"onLoadMore"],[42,44,28,46],[42,46,28,48,"onLoadMore"],[42,56,28,58],[42,57,28,59],[42,58,28,60],[43,4,29,4],[43,5,29,5],[43,6,29,6],[44,4,30,4],[44,5,30,5],[44,6,30,6],[44,8,30,8,"$f0a04ccd8dbdd83b$export$e5c5a5f917a5871c"],[44,27,30,49],[44,28,30,49,"useLayoutEffect"],[44,43,30,49],[44,45,30,51],[44,51,30,55],[45,6,31,8],[45,10,31,12,"ref"],[45,13,31,15],[45,14,31,16,"current"],[45,21,31,23],[45,23,31,25],[46,8,32,12],[47,8,33,12],[48,8,34,12],[49,8,35,12,"sentinelObserver"],[49,24,35,28],[49,25,35,29,"current"],[49,32,35,36],[49,35,35,39],[49,39,35,43,"IntersectionObserver"],[49,59,35,63],[49,60,35,64,"triggerLoadMore"],[49,75,35,79],[49,77,35,81],[50,10,36,16,"root"],[50,14,36,20],[50,16,36,22],[50,17,36,23],[50,18,36,24],[50,20,36,26,"$62d8ded9296f3872$export$cfa2225e87938781"],[50,39,36,67],[50,40,36,67,"getScrollParent"],[50,55,36,67],[50,57,36,69,"ref"],[50,60,36,72],[50,65,36,77],[50,69,36,81],[50,73,36,85,"ref"],[50,76,36,88],[50,81,36,93],[50,86,36,98],[50,87,36,99],[50,90,36,102],[50,95,36,107],[50,96,36,108],[50,99,36,111,"ref"],[50,102,36,114],[50,103,36,115,"current"],[50,110,36,122],[50,111,36,123],[51,10,37,16,"rootMargin"],[51,20,37,26],[51,22,37,28],[51,29,37,35],[51,32,37,38],[51,35,37,41,"scrollOffset"],[51,47,37,53],[51,52,37,58],[51,55,37,61],[51,58,37,64,"scrollOffset"],[51,70,37,76],[51,75,37,81],[51,78,37,84],[51,81,37,87,"scrollOffset"],[51,93,37,99],[52,8,38,12],[52,9,38,13],[52,10,38,14],[53,8,39,12,"sentinelObserver"],[53,24,39,28],[53,25,39,29,"current"],[53,32,39,36],[53,33,39,37,"observe"],[53,40,39,44],[53,41,39,45,"ref"],[53,44,39,48],[53,45,39,49,"current"],[53,52,39,56],[53,53,39,57],[54,6,40,8],[55,6,41,8],[55,13,41,15],[55,19,41,19],[56,8,42,12],[56,12,42,16,"sentinelObserver"],[56,28,42,32],[56,29,42,33,"current"],[56,36,42,40],[56,38,42,42,"sentinelObserver"],[56,54,42,58],[56,55,42,59,"current"],[56,62,42,66],[56,63,42,67,"disconnect"],[56,73,42,77],[56,74,42,78],[56,75,42,79],[57,6,43,8],[57,7,43,9],[58,4,44,4],[58,5,44,5],[58,7,44,7],[58,8,45,8,"collection"],[58,18,45,18],[58,20,46,8,"triggerLoadMore"],[58,35,46,23],[58,37,47,8,"ref"],[58,40,47,11],[58,42,48,8,"scrollOffset"],[58,54,48,20],[58,55,49,5],[58,56,49,6],[59,2,50,0],[60,0,50,1],[60,3]],"functionMap":{"names":["<global>","$a5fa973c1850dd36$export$ccaea96c28e8b9e7","<anonymous>"],"mappings":"AAA;ACmB;yECG;KDM;mDCC;KDc;CDM"},"hasCjsExports":false},"type":"js/module"}]}