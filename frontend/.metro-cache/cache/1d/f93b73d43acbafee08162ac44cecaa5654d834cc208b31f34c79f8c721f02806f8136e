{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":42,"index":42}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"expo-notifications","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":43},"end":{"line":2,"column":52,"index":95}}],"key":"nrBDtkRVez7cBhLzyaRjl+xVfvE=","exportNames":["*"],"imports":1}},{"name":"expo-device","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":96},"end":{"line":3,"column":38,"index":134}}],"key":"bBpmAhO1g++sdeUzQmFVGoQIVwg=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dV3bI3NOD8bfMzaIniMaFGy/nn8=","exportNames":["*"],"imports":1}},{"name":"../contexts/AuthContext","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":176},"end":{"line":5,"column":50,"index":226}}],"key":"oNCgyH4yx4pAIVZXLqqRGB2kuCY=","exportNames":["*"],"imports":1}},{"name":"firebase/firestore","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":227},"end":{"line":6,"column":49,"index":276}}],"key":"n8ZdwTgQb9oFW01pH/SKxYwC/nA=","exportNames":["*"],"imports":1}},{"name":"../config/firebase","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":7,"column":0,"index":277},"end":{"line":7,"column":40,"index":317}}],"key":"K/SZPG5sPeV1upVh8dao26aG7MQ=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.useNotifications = useNotifications;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _expoNotifications = require(_dependencyMap[1], \"expo-notifications\");\n  var Notifications = _interopNamespace(_expoNotifications);\n  var _expoDevice = require(_dependencyMap[2], \"expo-device\");\n  var Device = _interopNamespace(_expoDevice);\n  var _reactNativeWebDistExportsPlatform = require(_dependencyMap[3], \"react-native-web/dist/exports/Platform\");\n  var Platform = _interopDefault(_reactNativeWebDistExportsPlatform);\n  var _contextsAuthContext = require(_dependencyMap[4], \"../contexts/AuthContext\");\n  var _firebaseFirestore = require(_dependencyMap[5], \"firebase/firestore\");\n  var _configFirebase = require(_dependencyMap[6], \"../config/firebase\");\n  Notifications.setNotificationHandler({\n    handleNotification: async () => ({\n      shouldShowAlert: true,\n      shouldPlaySound: true,\n      shouldSetBadge: true\n    })\n  });\n  function useNotifications() {\n    _s();\n    const {\n      user\n    } = (0, _contextsAuthContext.useAuth)();\n    const notificationListener = (0, _react.useRef)();\n    const responseListener = (0, _react.useRef)();\n    (0, _react.useEffect)(() => {\n      registerForPushNotificationsAsync();\n      notificationListener.current = Notifications.addNotificationReceivedListener(notification => {\n        console.log('Notification received:', notification);\n      });\n      responseListener.current = Notifications.addNotificationResponseReceivedListener(response => {\n        console.log('Notification response:', response);\n      });\n      return () => {\n        if (notificationListener.current) {\n          notificationListener.current.remove();\n        }\n        if (responseListener.current) {\n          responseListener.current.remove();\n        }\n      };\n    }, []);\n    const registerForPushNotificationsAsync = async () => {\n      if (!Device.isDevice) {\n        console.log('Must use physical device for Push Notifications');\n        return;\n      }\n      try {\n        const {\n          status: existingStatus\n        } = await Notifications.getPermissionsAsync();\n        let finalStatus = existingStatus;\n        if (existingStatus !== 'granted') {\n          const {\n            status\n          } = await Notifications.requestPermissionsAsync();\n          finalStatus = status;\n        }\n        if (finalStatus !== 'granted') {\n          console.log('Failed to get push token for push notification!');\n          return;\n        }\n        const token = (await Notifications.getExpoPushTokenAsync()).data;\n        console.log('Expo Push Token:', token);\n        if (user) {\n          await (0, _firebaseFirestore.setDoc)((0, _firebaseFirestore.doc)(_configFirebase.db, 'users', user.uid), {\n            pushToken: token,\n            updatedAt: new Date()\n          }, {\n            merge: true\n          });\n        }\n        if (Platform.default.OS === 'android') {\n          Notifications.setNotificationChannelAsync('default', {\n            name: 'default',\n            importance: Notifications.AndroidImportance.MAX,\n            vibrationPattern: [0, 250, 250, 250],\n            lightColor: '#FF231F7C'\n          });\n        }\n      } catch (error) {\n        console.log('Error registering for push notifications:', error);\n      }\n    };\n    const sendPushNotification = async (expoPushToken, title, body, data) => {\n      const message = {\n        to: expoPushToken,\n        sound: 'default',\n        title,\n        body,\n        data\n      };\n      await fetch('https://exp.host/--/api/v2/push/send', {\n        method: 'POST',\n        headers: {\n          Accept: 'application/json',\n          'Accept-encoding': 'gzip, deflate',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(message)\n      });\n    };\n    return {\n      sendPushNotification\n    };\n  }\n  _s(useNotifications, \"wKyn5cFBgXRPMP7FCdkw+uEcGRs=\", false, function () {\n    return [_contextsAuthContext.useAuth];\n  });\n});","lineCount":137,"map":[[28,2,17,0,"exports"],[28,9,17,0],[28,10,17,0,"useNotifications"],[28,26,17,0],[28,29,17,0,"useNotifications"],[28,45,17,0],[29,2,1,0],[29,6,1,0,"_react"],[29,12,1,0],[29,15,1,0,"require"],[29,22,1,0],[29,23,1,0,"_dependencyMap"],[29,37,1,0],[30,2,2,0],[30,6,2,0,"_expoNotifications"],[30,24,2,0],[30,27,2,0,"require"],[30,34,2,0],[30,35,2,0,"_dependencyMap"],[30,49,2,0],[31,2,2,0],[31,6,2,0,"Notifications"],[31,19,2,0],[31,22,2,0,"_interopNamespace"],[31,39,2,0],[31,40,2,0,"_expoNotifications"],[31,58,2,0],[32,2,3,0],[32,6,3,0,"_expoDevice"],[32,17,3,0],[32,20,3,0,"require"],[32,27,3,0],[32,28,3,0,"_dependencyMap"],[32,42,3,0],[33,2,3,0],[33,6,3,0,"Device"],[33,12,3,0],[33,15,3,0,"_interopNamespace"],[33,32,3,0],[33,33,3,0,"_expoDevice"],[33,44,3,0],[34,2,3,38],[34,6,3,38,"_reactNativeWebDistExportsPlatform"],[34,40,3,38],[34,43,3,38,"require"],[34,50,3,38],[34,51,3,38,"_dependencyMap"],[34,65,3,38],[35,2,3,38],[35,6,3,38,"Platform"],[35,14,3,38],[35,17,3,38,"_interopDefault"],[35,32,3,38],[35,33,3,38,"_reactNativeWebDistExportsPlatform"],[35,67,3,38],[36,2,5,0],[36,6,5,0,"_contextsAuthContext"],[36,26,5,0],[36,29,5,0,"require"],[36,36,5,0],[36,37,5,0,"_dependencyMap"],[36,51,5,0],[37,2,6,0],[37,6,6,0,"_firebaseFirestore"],[37,24,6,0],[37,27,6,0,"require"],[37,34,6,0],[37,35,6,0,"_dependencyMap"],[37,49,6,0],[38,2,7,0],[38,6,7,0,"_configFirebase"],[38,21,7,0],[38,24,7,0,"require"],[38,31,7,0],[38,32,7,0,"_dependencyMap"],[38,46,7,0],[39,2,9,0,"Notifications"],[39,15,9,13],[39,16,9,14,"setNotificationHandler"],[39,38,9,36],[39,39,9,37],[40,4,10,2,"handleNotification"],[40,22,10,20],[40,24,10,22],[40,30,10,22,"handleNotification"],[40,31,10,22],[40,37,10,35],[41,6,11,4,"shouldShowAlert"],[41,21,11,19],[41,23,11,21],[41,27,11,25],[42,6,12,4,"shouldPlaySound"],[42,21,12,19],[42,23,12,21],[42,27,12,25],[43,6,13,4,"shouldSetBadge"],[43,20,13,18],[43,22,13,20],[44,4,14,2],[44,5,14,3],[45,2,15,0],[45,3,15,1],[45,4,15,2],[46,2,17,7],[46,11,17,16,"useNotifications"],[46,27,17,32,"useNotifications"],[46,28,17,32],[46,30,17,35],[47,4,17,35,"_s"],[47,6,17,35],[48,4,18,2],[48,10,18,8],[49,6,18,10,"user"],[50,4,18,15],[50,5,18,16],[50,8,18,19],[50,12,18,19,"useAuth"],[50,32,18,26],[50,33,18,26,"useAuth"],[50,40,18,26],[50,42,18,27],[50,43,18,28],[51,4,19,2],[51,10,19,8,"notificationListener"],[51,30,19,28],[51,33,19,31],[51,37,19,31,"useRef"],[51,43,19,37],[51,44,19,37,"useRef"],[51,50,19,37],[51,52,19,43],[51,53,19,44],[52,4,20,2],[52,10,20,8,"responseListener"],[52,26,20,24],[52,29,20,27],[52,33,20,27,"useRef"],[52,39,20,33],[52,40,20,33,"useRef"],[52,46,20,33],[52,48,20,39],[52,49,20,40],[53,4,22,2],[53,8,22,2,"useEffect"],[53,14,22,11],[53,15,22,11,"useEffect"],[53,24,22,11],[53,26,22,12],[53,32,22,18],[54,6,23,4,"registerForPushNotificationsAsync"],[54,39,23,37],[54,40,23,38],[54,41,23,39],[55,6,25,4,"notificationListener"],[55,26,25,24],[55,27,25,25,"current"],[55,34,25,32],[55,37,25,35,"Notifications"],[55,50,25,48],[55,51,25,49,"addNotificationReceivedListener"],[55,82,25,80],[55,83,25,81,"notification"],[55,95,25,93],[55,99,25,97],[56,8,26,6,"console"],[56,15,26,13],[56,16,26,14,"log"],[56,19,26,17],[56,20,26,18],[56,44,26,42],[56,46,26,44,"notification"],[56,58,26,56],[56,59,26,57],[57,6,27,4],[57,7,27,5],[57,8,27,6],[58,6,29,4,"responseListener"],[58,22,29,20],[58,23,29,21,"current"],[58,30,29,28],[58,33,29,31,"Notifications"],[58,46,29,44],[58,47,29,45,"addNotificationResponseReceivedListener"],[58,86,29,84],[58,87,29,85,"response"],[58,95,29,93],[58,99,29,97],[59,8,30,6,"console"],[59,15,30,13],[59,16,30,14,"log"],[59,19,30,17],[59,20,30,18],[59,44,30,42],[59,46,30,44,"response"],[59,54,30,52],[59,55,30,53],[60,6,31,4],[60,7,31,5],[60,8,31,6],[61,6,33,4],[61,13,33,11],[61,19,33,17],[62,8,34,6],[62,12,34,10,"notificationListener"],[62,32,34,30],[62,33,34,31,"current"],[62,40,34,38],[62,42,34,40],[63,10,35,8,"notificationListener"],[63,30,35,28],[63,31,35,29,"current"],[63,38,35,36],[63,39,35,37,"remove"],[63,45,35,43],[63,46,35,44],[63,47,35,45],[64,8,36,6],[65,8,37,6],[65,12,37,10,"responseListener"],[65,28,37,26],[65,29,37,27,"current"],[65,36,37,34],[65,38,37,36],[66,10,38,8,"responseListener"],[66,26,38,24],[66,27,38,25,"current"],[66,34,38,32],[66,35,38,33,"remove"],[66,41,38,39],[66,42,38,40],[66,43,38,41],[67,8,39,6],[68,6,40,4],[68,7,40,5],[69,4,41,2],[69,5,41,3],[69,7,41,5],[69,9,41,7],[69,10,41,8],[70,4,43,2],[70,10,43,8,"registerForPushNotificationsAsync"],[70,43,43,41],[70,46,43,44],[70,52,43,44,"registerForPushNotificationsAsync"],[70,53,43,44],[70,58,43,56],[71,6,44,4],[71,10,44,8],[71,11,44,9,"Device"],[71,17,44,15],[71,18,44,16,"isDevice"],[71,26,44,24],[71,28,44,26],[72,8,45,6,"console"],[72,15,45,13],[72,16,45,14,"log"],[72,19,45,17],[72,20,45,18],[72,69,45,67],[72,70,45,68],[73,8,46,6],[74,6,47,4],[75,6,49,4],[75,10,49,8],[76,8,50,6],[76,14,50,12],[77,10,50,14,"status"],[77,16,50,20],[77,18,50,22,"existingStatus"],[78,8,50,37],[78,9,50,38],[78,12,50,41],[78,18,50,47,"Notifications"],[78,31,50,60],[78,32,50,61,"getPermissionsAsync"],[78,51,50,80],[78,52,50,81],[78,53,50,82],[79,8,51,6],[79,12,51,10,"finalStatus"],[79,23,51,21],[79,26,51,24,"existingStatus"],[79,40,51,38],[80,8,53,6],[80,12,53,10,"existingStatus"],[80,26,53,24],[80,31,53,29],[80,40,53,38],[80,42,53,40],[81,10,54,8],[81,16,54,14],[82,12,54,16,"status"],[83,10,54,23],[83,11,54,24],[83,14,54,27],[83,20,54,33,"Notifications"],[83,33,54,46],[83,34,54,47,"requestPermissionsAsync"],[83,57,54,70],[83,58,54,71],[83,59,54,72],[84,10,55,8,"finalStatus"],[84,21,55,19],[84,24,55,22,"status"],[84,30,55,28],[85,8,56,6],[86,8,58,6],[86,12,58,10,"finalStatus"],[86,23,58,21],[86,28,58,26],[86,37,58,35],[86,39,58,37],[87,10,59,8,"console"],[87,17,59,15],[87,18,59,16,"log"],[87,21,59,19],[87,22,59,20],[87,71,59,69],[87,72,59,70],[88,10,60,8],[89,8,61,6],[90,8,63,6],[90,14,63,12,"token"],[90,19,63,17],[90,22,63,20],[90,23,63,21],[90,29,63,27,"Notifications"],[90,42,63,40],[90,43,63,41,"getExpoPushTokenAsync"],[90,64,63,62],[90,65,63,63],[90,66,63,64],[90,68,63,66,"data"],[90,72,63,70],[91,8,64,6,"console"],[91,15,64,13],[91,16,64,14,"log"],[91,19,64,17],[91,20,64,18],[91,38,64,36],[91,40,64,38,"token"],[91,45,64,43],[91,46,64,44],[92,8,66,6],[92,12,66,10,"user"],[92,16,66,14],[92,18,66,16],[93,10,67,8],[93,16,67,14],[93,20,67,14,"setDoc"],[93,38,67,20],[93,39,67,20,"setDoc"],[93,45,67,20],[93,47,68,10],[93,51,68,10,"doc"],[93,69,68,13],[93,70,68,13,"doc"],[93,73,68,13],[93,75,68,14,"db"],[93,90,68,16],[93,91,68,16,"db"],[93,93,68,16],[93,95,68,18],[93,102,68,25],[93,104,68,27,"user"],[93,108,68,31],[93,109,68,32,"uid"],[93,112,68,35],[93,113,68,36],[93,115,69,10],[94,12,69,12,"pushToken"],[94,21,69,21],[94,23,69,23,"token"],[94,28,69,28],[95,12,69,30,"updatedAt"],[95,21,69,39],[95,23,69,41],[95,27,69,45,"Date"],[95,31,69,49],[95,32,69,50],[96,10,69,52],[96,11,69,53],[96,13,70,10],[97,12,70,12,"merge"],[97,17,70,17],[97,19,70,19],[98,10,70,24],[98,11,71,8],[98,12,71,9],[99,8,72,6],[100,8,74,6],[100,12,74,10,"Platform"],[100,20,74,18],[100,21,74,18,"default"],[100,28,74,18],[100,29,74,19,"OS"],[100,31,74,21],[100,36,74,26],[100,45,74,35],[100,47,74,37],[101,10,75,8,"Notifications"],[101,23,75,21],[101,24,75,22,"setNotificationChannelAsync"],[101,51,75,49],[101,52,75,50],[101,61,75,59],[101,63,75,61],[102,12,76,10,"name"],[102,16,76,14],[102,18,76,16],[102,27,76,25],[103,12,77,10,"importance"],[103,22,77,20],[103,24,77,22,"Notifications"],[103,37,77,35],[103,38,77,36,"AndroidImportance"],[103,55,77,53],[103,56,77,54,"MAX"],[103,59,77,57],[104,12,78,10,"vibrationPattern"],[104,28,78,26],[104,30,78,28],[104,31,78,29],[104,32,78,30],[104,34,78,32],[104,37,78,35],[104,39,78,37],[104,42,78,40],[104,44,78,42],[104,47,78,45],[104,48,78,46],[105,12,79,10,"lightColor"],[105,22,79,20],[105,24,79,22],[106,10,80,8],[106,11,80,9],[106,12,80,10],[107,8,81,6],[108,6,82,4],[108,7,82,5],[108,8,82,6],[108,15,82,13,"error"],[108,20,82,18],[108,22,82,20],[109,8,83,6,"console"],[109,15,83,13],[109,16,83,14,"log"],[109,19,83,17],[109,20,83,18],[109,63,83,61],[109,65,83,63,"error"],[109,70,83,68],[109,71,83,69],[110,6,84,4],[111,4,85,2],[111,5,85,3],[112,4,87,2],[112,10,87,8,"sendPushNotification"],[112,30,87,28],[112,33,87,31],[112,39,87,31,"sendPushNotification"],[112,40,87,38,"expoPushToken"],[112,53,87,59],[112,55,87,61,"title"],[112,60,87,74],[112,62,87,76,"body"],[112,66,87,88],[112,68,87,90,"data"],[112,72,87,100],[112,77,87,105],[113,6,88,4],[113,12,88,10,"message"],[113,19,88,17],[113,22,88,20],[114,8,89,6,"to"],[114,10,89,8],[114,12,89,10,"expoPushToken"],[114,25,89,23],[115,8,90,6,"sound"],[115,13,90,11],[115,15,90,13],[115,24,90,22],[116,8,91,6,"title"],[116,13,91,11],[117,8,92,6,"body"],[117,12,92,10],[118,8,93,6,"data"],[119,6,94,4],[119,7,94,5],[120,6,96,4],[120,12,96,10,"fetch"],[120,17,96,15],[120,18,96,16],[120,56,96,54],[120,58,96,56],[121,8,97,6,"method"],[121,14,97,12],[121,16,97,14],[121,22,97,20],[122,8,98,6,"headers"],[122,15,98,13],[122,17,98,15],[123,10,99,8,"Accept"],[123,16,99,14],[123,18,99,16],[123,36,99,34],[124,10,100,8],[124,27,100,25],[124,29,100,27],[124,44,100,42],[125,10,101,8],[125,24,101,22],[125,26,101,24],[126,8,102,6],[126,9,102,7],[127,8,103,6,"body"],[127,12,103,10],[127,14,103,12,"JSON"],[127,18,103,16],[127,19,103,17,"stringify"],[127,28,103,26],[127,29,103,27,"message"],[127,36,103,34],[128,6,104,4],[128,7,104,5],[128,8,104,6],[129,4,105,2],[129,5,105,3],[130,4,107,2],[130,11,107,9],[131,6,107,11,"sendPushNotification"],[132,4,107,32],[132,5,107,33],[133,2,108,0],[134,2,108,1,"_s"],[134,4,108,1],[134,5,17,16,"useNotifications"],[134,21,17,32],[135,4,17,32],[135,12,18,19,"useAuth"],[135,32,18,26],[135,33,18,26,"useAuth"],[135,40,18,26],[136,2,18,26],[137,0,18,26],[137,3]],"functionMap":{"names":["<global>","Notifications.setNotificationHandler$argument_0.handleNotification","useNotifications","useEffect$argument_0","Notifications.addNotificationReceivedListener$argument_0","Notifications.addNotificationResponseReceivedListener$argument_0","<anonymous>","registerForPushNotificationsAsync","sendPushNotification"],"mappings":"AAA;sBCS;IDI;OEG;YCK;iFCG;KDE;qFEE;KFE;WGE;KHO;GDC;4CKE;GL0C;+BME;GNkB"},"hasCjsExports":false},"type":"js/module"}]}