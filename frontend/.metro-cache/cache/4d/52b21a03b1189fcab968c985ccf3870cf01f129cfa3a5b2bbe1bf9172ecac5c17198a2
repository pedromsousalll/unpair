{"dependencies":[{"name":"@legendapp/tools","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":7,"column":13,"index":130},"end":{"line":7,"column":40,"index":157}}],"key":"sLyMyeOlrITXOlaubzTt/qKAWy4=","exportNames":["*"],"imports":1}},{"name":"@legendapp/tools/react","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":8,"column":13,"index":172},"end":{"line":8,"column":46,"index":205}}],"key":"bwK4VznsKTS6GsBPIw9uf+JhVV8=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":9,"column":14,"index":221},"end":{"line":9,"column":30,"index":237}}],"key":"XN65eZP/QkNMzaBAXbG/zPyidpY=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.useTransformOrigin = void 0;\n  var _tools = require(_dependencyMap[0], \"@legendapp/tools\");\n  var _react = require(_dependencyMap[1], \"@legendapp/tools/react\");\n  var _react2 = require(_dependencyMap[2], \"react\");\n  /* eslint-disable react-hooks/rules-of-hooks */\n\n  function computeOrigin(val, size) {\n    const isStr = (0, _tools.isString)(val);\n    const isPerc = isStr && val.endsWith('%');\n    // Chop off a % or px\n    let num = isStr ? +val.replace(/%|px/, '') : val;\n    // Divide by 100 for percent or by view size if pixels\n    const perc = isPerc ? +num / 100 : +num / size;\n    // Offset by half of the size\n    if (!isNaN(perc)) {\n      num = (perc - 0.5) * size;\n    } else {\n      // Fallback to no origin\n      num = 0;\n    }\n    return num;\n  }\n  const useTransformOrigin = exports.useTransformOrigin = function useTransformOrigin(transformOrigin, transform, onLayoutProp) {\n    let onLayout = onLayoutProp;\n    let needsLayoutX = false;\n    let needsLayoutY = false;\n\n    // Compute whether x and y need layout based on input\n    if (transformOrigin) {\n      let {\n        x,\n        y\n      } = transformOrigin;\n      needsLayoutX = x !== undefined && x !== '50%';\n      needsLayoutY = y !== undefined && y !== '50%';\n    }\n\n    // Compute whether we ever needed layout so we don't remove a hook if the origin is removed\n    const everDidLayout = (0, _react.useEverHadValue)(!!transformOrigin, true);\n    if (everDidLayout) {\n      const [size, setSize] = (0, _react2.useState)({\n        width: 0,\n        height: 0\n      });\n      onLayout = (0, _react2.useCallback)(e => {\n        setSize(e.nativeEvent.layout);\n        onLayoutProp === null || onLayoutProp === void 0 || onLayoutProp(e);\n      }, [onLayoutProp]);\n      if (transformOrigin && transform) {\n        let {\n          x,\n          y\n        } = transformOrigin;\n\n        // Compute x and y origins\n        x = needsLayoutX ? computeOrigin(x, size.width) : 0;\n        y = needsLayoutY ? computeOrigin(y, size.height) : 0;\n\n        // First move the center of the view to the origin\n        transform.splice(0, 0, {\n          translateY: y\n        });\n        transform.splice(0, 0, {\n          translateX: x\n        });\n\n        // Restore it back the the original position after transforming\n        transform.push({\n          translateX: -x\n        });\n        transform.push({\n          translateY: -y\n        });\n      }\n    }\n    return onLayout;\n  };\n});","lineCount":84,"map":[[2,2,1,0],[2,14,1,12],[4,2,3,0,"Object"],[4,8,3,6],[4,9,3,7,"defineProperty"],[4,23,3,21],[4,24,3,22,"exports"],[4,31,3,29],[4,33,3,31],[4,45,3,43],[4,47,3,45],[5,4,4,2,"value"],[5,9,4,7],[5,11,4,9],[6,2,5,0],[6,3,5,1],[6,4,5,2],[7,2,6,0,"exports"],[7,9,6,7],[7,10,6,8,"useTransformOrigin"],[7,28,6,26],[7,31,6,29],[7,36,6,34],[7,37,6,35],[8,2,7,0],[8,6,7,4,"_tools"],[8,12,7,10],[8,15,7,13,"require"],[8,22,7,20],[8,23,7,20,"_dependencyMap"],[8,37,7,20],[8,60,7,39],[8,61,7,40],[9,2,8,0],[9,6,8,4,"_react"],[9,12,8,10],[9,15,8,13,"require"],[9,22,8,20],[9,23,8,20,"_dependencyMap"],[9,37,8,20],[9,66,8,45],[9,67,8,46],[10,2,9,0],[10,6,9,4,"_react2"],[10,13,9,11],[10,16,9,14,"require"],[10,23,9,21],[10,24,9,21,"_dependencyMap"],[10,38,9,21],[10,50,9,29],[10,51,9,30],[11,2,10,0],[13,2,12,0],[13,11,12,9,"computeOrigin"],[13,24,12,22,"computeOrigin"],[13,25,12,23,"val"],[13,28,12,26],[13,30,12,28,"size"],[13,34,12,32],[13,36,12,34],[14,4,13,2],[14,10,13,8,"isStr"],[14,15,13,13],[14,18,13,16],[14,19,13,17],[14,20,13,18],[14,22,13,20,"_tools"],[14,28,13,26],[14,29,13,27,"isString"],[14,37,13,35],[14,39,13,37,"val"],[14,42,13,40],[14,43,13,41],[15,4,14,2],[15,10,14,8,"isPerc"],[15,16,14,14],[15,19,14,17,"isStr"],[15,24,14,22],[15,28,14,26,"val"],[15,31,14,29],[15,32,14,30,"endsWith"],[15,40,14,38],[15,41,14,39],[15,44,14,42],[15,45,14,43],[16,4,15,2],[17,4,16,2],[17,8,16,6,"num"],[17,11,16,9],[17,14,16,12,"isStr"],[17,19,16,17],[17,22,16,20],[17,23,16,21,"val"],[17,26,16,24],[17,27,16,25,"replace"],[17,34,16,32],[17,35,16,33],[17,41,16,39],[17,43,16,41],[17,45,16,43],[17,46,16,44],[17,49,16,47,"val"],[17,52,16,50],[18,4,17,2],[19,4,18,2],[19,10,18,8,"perc"],[19,14,18,12],[19,17,18,15,"isPerc"],[19,23,18,21],[19,26,18,24],[19,27,18,25,"num"],[19,30,18,28],[19,33,18,31],[19,36,18,34],[19,39,18,37],[19,40,18,38,"num"],[19,43,18,41],[19,46,18,44,"size"],[19,50,18,48],[20,4,19,2],[21,4,20,2],[21,8,20,6],[21,9,20,7,"isNaN"],[21,14,20,12],[21,15,20,13,"perc"],[21,19,20,17],[21,20,20,18],[21,22,20,20],[22,6,21,4,"num"],[22,9,21,7],[22,12,21,10],[22,13,21,11,"perc"],[22,17,21,15],[22,20,21,18],[22,23,21,21],[22,27,21,25,"size"],[22,31,21,29],[23,4,22,2],[23,5,22,3],[23,11,22,9],[24,6,23,4],[25,6,24,4,"num"],[25,9,24,7],[25,12,24,10],[25,13,24,11],[26,4,25,2],[27,4,26,2],[27,11,26,9,"num"],[27,14,26,12],[28,2,27,0],[29,2,28,0],[29,8,28,6,"useTransformOrigin"],[29,26,28,24],[29,29,28,27,"exports"],[29,36,28,34],[29,37,28,35,"useTransformOrigin"],[29,55,28,53],[29,58,28,56],[29,67,28,65,"useTransformOrigin"],[29,85,28,83,"useTransformOrigin"],[29,86,28,84,"transformOrigin"],[29,101,28,99],[29,103,28,101,"transform"],[29,112,28,110],[29,114,28,112,"onLayoutProp"],[29,126,28,124],[29,128,28,126],[30,4,29,2],[30,8,29,6,"onLayout"],[30,16,29,14],[30,19,29,17,"onLayoutProp"],[30,31,29,29],[31,4,30,2],[31,8,30,6,"needsLayoutX"],[31,20,30,18],[31,23,30,21],[31,28,30,26],[32,4,31,2],[32,8,31,6,"needsLayoutY"],[32,20,31,18],[32,23,31,21],[32,28,31,26],[34,4,33,2],[35,4,34,2],[35,8,34,6,"transformOrigin"],[35,23,34,21],[35,25,34,23],[36,6,35,4],[36,10,35,8],[37,8,36,6,"x"],[37,9,36,7],[38,8,37,6,"y"],[39,6,38,4],[39,7,38,5],[39,10,38,8,"transformOrigin"],[39,25,38,23],[40,6,39,4,"needsLayoutX"],[40,18,39,16],[40,21,39,19,"x"],[40,22,39,20],[40,27,39,25,"undefined"],[40,36,39,34],[40,40,39,38,"x"],[40,41,39,39],[40,46,39,44],[40,51,39,49],[41,6,40,4,"needsLayoutY"],[41,18,40,16],[41,21,40,19,"y"],[41,22,40,20],[41,27,40,25,"undefined"],[41,36,40,34],[41,40,40,38,"y"],[41,41,40,39],[41,46,40,44],[41,51,40,49],[42,4,41,2],[44,4,43,2],[45,4,44,2],[45,10,44,8,"everDidLayout"],[45,23,44,21],[45,26,44,24],[45,27,44,25],[45,28,44,26],[45,30,44,28,"_react"],[45,36,44,34],[45,37,44,35,"useEverHadValue"],[45,52,44,50],[45,54,44,52],[45,55,44,53],[45,56,44,54,"transformOrigin"],[45,71,44,69],[45,73,44,71],[45,77,44,75],[45,78,44,76],[46,4,45,2],[46,8,45,6,"everDidLayout"],[46,21,45,19],[46,23,45,21],[47,6,46,4],[47,12,46,10],[47,13,46,11,"size"],[47,17,46,15],[47,19,46,17,"setSize"],[47,26,46,24],[47,27,46,25],[47,30,46,28],[47,31,46,29],[47,32,46,30],[47,34,46,32,"_react2"],[47,41,46,39],[47,42,46,40,"useState"],[47,50,46,48],[47,52,46,50],[48,8,47,6,"width"],[48,13,47,11],[48,15,47,13],[48,16,47,14],[49,8,48,6,"height"],[49,14,48,12],[49,16,48,14],[50,6,49,4],[50,7,49,5],[50,8,49,6],[51,6,50,4,"onLayout"],[51,14,50,12],[51,17,50,15],[51,18,50,16],[51,19,50,17],[51,21,50,19,"_react2"],[51,28,50,26],[51,29,50,27,"useCallback"],[51,40,50,38],[51,42,50,40,"e"],[51,43,50,41],[51,47,50,45],[52,8,51,6,"setSize"],[52,15,51,13],[52,16,51,14,"e"],[52,17,51,15],[52,18,51,16,"nativeEvent"],[52,29,51,27],[52,30,51,28,"layout"],[52,36,51,34],[52,37,51,35],[53,8,52,6,"onLayoutProp"],[53,20,52,18],[53,25,52,23],[53,29,52,27],[53,33,52,31,"onLayoutProp"],[53,45,52,43],[53,50,52,48],[53,55,52,53],[53,56,52,54],[53,60,52,58,"onLayoutProp"],[53,72,52,70],[53,73,52,71,"e"],[53,74,52,72],[53,75,52,73],[54,6,53,4],[54,7,53,5],[54,9,53,7],[54,10,53,8,"onLayoutProp"],[54,22,53,20],[54,23,53,21],[54,24,53,22],[55,6,54,4],[55,10,54,8,"transformOrigin"],[55,25,54,23],[55,29,54,27,"transform"],[55,38,54,36],[55,40,54,38],[56,8,55,6],[56,12,55,10],[57,10,56,8,"x"],[57,11,56,9],[58,10,57,8,"y"],[59,8,58,6],[59,9,58,7],[59,12,58,10,"transformOrigin"],[59,27,58,25],[61,8,60,6],[62,8,61,6,"x"],[62,9,61,7],[62,12,61,10,"needsLayoutX"],[62,24,61,22],[62,27,61,25,"computeOrigin"],[62,40,61,38],[62,41,61,39,"x"],[62,42,61,40],[62,44,61,42,"size"],[62,48,61,46],[62,49,61,47,"width"],[62,54,61,52],[62,55,61,53],[62,58,61,56],[62,59,61,57],[63,8,62,6,"y"],[63,9,62,7],[63,12,62,10,"needsLayoutY"],[63,24,62,22],[63,27,62,25,"computeOrigin"],[63,40,62,38],[63,41,62,39,"y"],[63,42,62,40],[63,44,62,42,"size"],[63,48,62,46],[63,49,62,47,"height"],[63,55,62,53],[63,56,62,54],[63,59,62,57],[63,60,62,58],[65,8,64,6],[66,8,65,6,"transform"],[66,17,65,15],[66,18,65,16,"splice"],[66,24,65,22],[66,25,65,23],[66,26,65,24],[66,28,65,26],[66,29,65,27],[66,31,65,29],[67,10,66,8,"translateY"],[67,20,66,18],[67,22,66,20,"y"],[68,8,67,6],[68,9,67,7],[68,10,67,8],[69,8,68,6,"transform"],[69,17,68,15],[69,18,68,16,"splice"],[69,24,68,22],[69,25,68,23],[69,26,68,24],[69,28,68,26],[69,29,68,27],[69,31,68,29],[70,10,69,8,"translateX"],[70,20,69,18],[70,22,69,20,"x"],[71,8,70,6],[71,9,70,7],[71,10,70,8],[73,8,72,6],[74,8,73,6,"transform"],[74,17,73,15],[74,18,73,16,"push"],[74,22,73,20],[74,23,73,21],[75,10,74,8,"translateX"],[75,20,74,18],[75,22,74,20],[75,23,74,21,"x"],[76,8,75,6],[76,9,75,7],[76,10,75,8],[77,8,76,6,"transform"],[77,17,76,15],[77,18,76,16,"push"],[77,22,76,20],[77,23,76,21],[78,10,77,8,"translateY"],[78,20,77,18],[78,22,77,20],[78,23,77,21,"y"],[79,8,78,6],[79,9,78,7],[79,10,78,8],[80,6,79,4],[81,4,80,2],[82,4,81,2],[82,11,81,9,"onLayout"],[82,19,81,17],[83,2,82,0],[83,3,82,1],[84,0,82,2],[84,3]],"functionMap":{"names":["<global>","computeOrigin","useTransformOrigin","<anonymous>"],"mappings":"AAA;ACW;CDe;wDEC;wCCsB;KDG;CF6B"},"hasCjsExports":true},"type":"js/module"}]}