{"dependencies":[{"name":"./useEvent.main.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":1,"column":32,"index":32},"end":{"line":1,"column":61,"index":61}}],"key":"kc+oP7CxFu1tc75asyBchxqN0z0=","exportNames":["*"],"imports":1}},{"name":"./useLayoutEffect.main.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":2,"column":32,"index":95},"end":{"line":2,"column":68,"index":131}}],"key":"TbXf8L8jhCWxJCdYU7FEHgIZ098=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":3,"column":19,"index":152},"end":{"line":3,"column":35,"index":168}}],"key":"XN65eZP/QkNMzaBAXbG/zPyidpY=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var $2a8c0bb1629926c8$exports = require(_dependencyMap[0], \"./useEvent.main.js\");\n  var $78605a5d7424e31b$exports = require(_dependencyMap[1], \"./useLayoutEffect.main.js\");\n  var $4Zukt$react = require(_dependencyMap[2], \"react\");\n  function $parcel$export(e, n, v, s) {\n    Object.defineProperty(e, n, {\n      get: v,\n      set: s,\n      enumerable: true,\n      configurable: true\n    });\n  }\n  $parcel$export(module.exports, \"useLoadMore\", () => $faa6ccd6fb62f877$export$7717c92ee915373e);\n  /*\n   * Copyright 2024 Adobe. All rights reserved.\n   * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License. You may obtain a copy\n   * of the License at http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software distributed under\n   * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n   * OF ANY KIND, either express or implied. See the License for the specific language\n   * governing permissions and limitations under the License.\n   */\n\n  function $faa6ccd6fb62f877$export$7717c92ee915373e(props, ref) {\n    let {\n      isLoading: isLoading,\n      onLoadMore: onLoadMore,\n      scrollOffset = 1,\n      items: items\n    } = props;\n    // Handle scrolling, and call onLoadMore when nearing the bottom.\n    let isLoadingRef = (0, $4Zukt$react.useRef)(isLoading);\n    let prevProps = (0, $4Zukt$react.useRef)(props);\n    let onScroll = (0, $4Zukt$react.useCallback)(() => {\n      if (ref.current && !isLoadingRef.current && onLoadMore) {\n        let shouldLoadMore = ref.current.scrollHeight - ref.current.scrollTop - ref.current.clientHeight < ref.current.clientHeight * scrollOffset;\n        if (shouldLoadMore) {\n          isLoadingRef.current = true;\n          onLoadMore();\n        }\n      }\n    }, [onLoadMore, ref, scrollOffset]);\n    let lastItems = (0, $4Zukt$react.useRef)(items);\n    (0, $78605a5d7424e31b$exports.useLayoutEffect)(() => {\n      // Only update isLoadingRef if props object actually changed,\n      // not if a local state change occurred.\n      if (props !== prevProps.current) {\n        isLoadingRef.current = isLoading;\n        prevProps.current = props;\n      }\n      // TODO: Eventually this hook will move back into RAC during which we will accept the collection as a option to this hook.\n      // We will only load more if the collection has changed after the last load to prevent multiple onLoadMore from being called\n      // while the data from the last onLoadMore is being processed by RAC collection.\n      let shouldLoadMore = (ref === null || ref === void 0 ? void 0 : ref.current) && !isLoadingRef.current && onLoadMore && (!items || items !== lastItems.current) && ref.current.clientHeight === ref.current.scrollHeight;\n      if (shouldLoadMore) {\n        isLoadingRef.current = true;\n        onLoadMore === null || onLoadMore === void 0 ? void 0 : onLoadMore();\n      }\n      lastItems.current = items;\n    }, [isLoading, onLoadMore, props, ref, items]);\n    // TODO: maybe this should still just return scroll props?\n    // Test against case where the ref isn't defined when this is called\n    // Think this was a problem when trying to attach to the scrollable body of the table in OnLoadMoreTableBodyScroll\n    (0, $2a8c0bb1629926c8$exports.useEvent)(ref, 'scroll', onScroll);\n  }\n});","lineCount":68,"map":[[2,2,1,0],[2,6,1,4,"$2a8c0bb1629926c8$exports"],[2,31,1,29],[2,34,1,32,"require"],[2,41,1,39],[2,42,1,39,"_dependencyMap"],[2,56,1,39],[2,81,1,60],[2,82,1,61],[3,2,2,0],[3,6,2,4,"$78605a5d7424e31b$exports"],[3,31,2,29],[3,34,2,32,"require"],[3,41,2,39],[3,42,2,39,"_dependencyMap"],[3,56,2,39],[3,88,2,67],[3,89,2,68],[4,2,3,0],[4,6,3,4,"$4Zukt$react"],[4,18,3,16],[4,21,3,19,"require"],[4,28,3,26],[4,29,3,26,"_dependencyMap"],[4,43,3,26],[4,55,3,34],[4,56,3,35],[5,2,6,0],[5,11,6,9,"$parcel$export"],[5,25,6,23,"$parcel$export"],[5,26,6,24,"e"],[5,27,6,25],[5,29,6,27,"n"],[5,30,6,28],[5,32,6,30,"v"],[5,33,6,31],[5,35,6,33,"s"],[5,36,6,34],[5,38,6,36],[6,4,7,2,"Object"],[6,10,7,8],[6,11,7,9,"defineProperty"],[6,25,7,23],[6,26,7,24,"e"],[6,27,7,25],[6,29,7,27,"n"],[6,30,7,28],[6,32,7,30],[7,6,7,31,"get"],[7,9,7,34],[7,11,7,36,"v"],[7,12,7,37],[8,6,7,39,"set"],[8,9,7,42],[8,11,7,44,"s"],[8,12,7,45],[9,6,7,47,"enumerable"],[9,16,7,57],[9,18,7,59],[9,22,7,63],[10,6,7,65,"configurable"],[10,18,7,77],[10,20,7,79],[11,4,7,83],[11,5,7,84],[11,6,7,85],[12,2,8,0],[13,2,10,0,"$parcel$export"],[13,16,10,14],[13,17,10,15,"module"],[13,23,10,21],[13,24,10,22,"exports"],[13,31,10,29],[13,33,10,31],[13,46,10,44],[13,48,10,46],[13,54,10,52,"$faa6ccd6fb62f877$export$7717c92ee915373e"],[13,95,10,93],[13,96,10,94],[14,2,11,0],[15,0,12,0],[16,0,13,0],[17,0,14,0],[18,0,15,0],[19,0,16,0],[20,0,17,0],[21,0,18,0],[22,0,19,0],[23,0,20,0],[24,0,21,0],[26,2,24,0],[26,11,24,9,"$faa6ccd6fb62f877$export$7717c92ee915373e"],[26,52,24,50,"$faa6ccd6fb62f877$export$7717c92ee915373e"],[26,53,24,51,"props"],[26,58,24,56],[26,60,24,58,"ref"],[26,63,24,61],[26,65,24,63],[27,4,25,4],[27,8,25,8],[28,6,25,10,"isLoading"],[28,15,25,19],[28,17,25,21,"isLoading"],[28,26,25,30],[29,6,25,32,"onLoadMore"],[29,16,25,42],[29,18,25,44,"onLoadMore"],[29,28,25,54],[30,6,25,70,"scrollOffset"],[30,18,25,82],[30,21,25,85],[30,22,25,86],[31,6,25,88,"items"],[31,11,25,93],[31,13,25,95,"items"],[32,4,25,101],[32,5,25,102],[32,8,25,105,"props"],[32,13,25,110],[33,4,26,4],[34,4,27,4],[34,8,27,8,"isLoadingRef"],[34,20,27,20],[34,23,27,23],[34,24,27,24],[34,25,27,25],[34,27,27,27,"$4Zukt$react"],[34,39,27,39],[34,40,27,40,"useRef"],[34,46,27,46],[34,48,27,48,"isLoading"],[34,57,27,57],[34,58,27,58],[35,4,28,4],[35,8,28,8,"prevProps"],[35,17,28,17],[35,20,28,20],[35,21,28,21],[35,22,28,22],[35,24,28,24,"$4Zukt$react"],[35,36,28,36],[35,37,28,37,"useRef"],[35,43,28,43],[35,45,28,45,"props"],[35,50,28,50],[35,51,28,51],[36,4,29,4],[36,8,29,8,"onScroll"],[36,16,29,16],[36,19,29,19],[36,20,29,20],[36,21,29,21],[36,23,29,23,"$4Zukt$react"],[36,35,29,35],[36,36,29,36,"useCallback"],[36,47,29,47],[36,49,29,49],[36,55,29,53],[37,6,30,8],[37,10,30,12,"ref"],[37,13,30,15],[37,14,30,16,"current"],[37,21,30,23],[37,25,30,27],[37,26,30,28,"isLoadingRef"],[37,38,30,40],[37,39,30,41,"current"],[37,46,30,48],[37,50,30,52,"onLoadMore"],[37,60,30,62],[37,62,30,64],[38,8,31,12],[38,12,31,16,"shouldLoadMore"],[38,26,31,30],[38,29,31,33,"ref"],[38,32,31,36],[38,33,31,37,"current"],[38,40,31,44],[38,41,31,45,"scrollHeight"],[38,53,31,57],[38,56,31,60,"ref"],[38,59,31,63],[38,60,31,64,"current"],[38,67,31,71],[38,68,31,72,"scrollTop"],[38,77,31,81],[38,80,31,84,"ref"],[38,83,31,87],[38,84,31,88,"current"],[38,91,31,95],[38,92,31,96,"clientHeight"],[38,104,31,108],[38,107,31,111,"ref"],[38,110,31,114],[38,111,31,115,"current"],[38,118,31,122],[38,119,31,123,"clientHeight"],[38,131,31,135],[38,134,31,138,"scrollOffset"],[38,146,31,150],[39,8,32,12],[39,12,32,16,"shouldLoadMore"],[39,26,32,30],[39,28,32,32],[40,10,33,16,"isLoadingRef"],[40,22,33,28],[40,23,33,29,"current"],[40,30,33,36],[40,33,33,39],[40,37,33,43],[41,10,34,16,"onLoadMore"],[41,20,34,26],[41,21,34,27],[41,22,34,28],[42,8,35,12],[43,6,36,8],[44,4,37,4],[44,5,37,5],[44,7,37,7],[44,8,38,8,"onLoadMore"],[44,18,38,18],[44,20,39,8,"ref"],[44,23,39,11],[44,25,40,8,"scrollOffset"],[44,37,40,20],[44,38,41,5],[44,39,41,6],[45,4,42,4],[45,8,42,8,"lastItems"],[45,17,42,17],[45,20,42,20],[45,21,42,21],[45,22,42,22],[45,24,42,24,"$4Zukt$react"],[45,36,42,36],[45,37,42,37,"useRef"],[45,43,42,43],[45,45,42,45,"items"],[45,50,42,50],[45,51,42,51],[46,4,43,4],[46,5,43,5],[46,6,43,6],[46,8,43,8,"$78605a5d7424e31b$exports"],[46,33,43,33],[46,34,43,34,"useLayoutEffect"],[46,49,43,49],[46,51,43,51],[46,57,43,55],[47,6,44,8],[48,6,45,8],[49,6,46,8],[49,10,46,12,"props"],[49,15,46,17],[49,20,46,22,"prevProps"],[49,29,46,31],[49,30,46,32,"current"],[49,37,46,39],[49,39,46,41],[50,8,47,12,"isLoadingRef"],[50,20,47,24],[50,21,47,25,"current"],[50,28,47,32],[50,31,47,35,"isLoading"],[50,40,47,44],[51,8,48,12,"prevProps"],[51,17,48,21],[51,18,48,22,"current"],[51,25,48,29],[51,28,48,32,"props"],[51,33,48,37],[52,6,49,8],[53,6,50,8],[54,6,51,8],[55,6,52,8],[56,6,53,8],[56,10,53,12,"shouldLoadMore"],[56,24,53,26],[56,27,53,29],[56,28,53,30,"ref"],[56,31,53,33],[56,36,53,38],[56,40,53,42],[56,44,53,46,"ref"],[56,47,53,49],[56,52,53,54],[56,57,53,59],[56,58,53,60],[56,61,53,63],[56,66,53,68],[56,67,53,69],[56,70,53,72,"ref"],[56,73,53,75],[56,74,53,76,"current"],[56,81,53,83],[56,86,53,88],[56,87,53,89,"isLoadingRef"],[56,99,53,101],[56,100,53,102,"current"],[56,107,53,109],[56,111,53,113,"onLoadMore"],[56,121,53,123],[56,126,53,128],[56,127,53,129,"items"],[56,132,53,134],[56,136,53,138,"items"],[56,141,53,143],[56,146,53,148,"lastItems"],[56,155,53,157],[56,156,53,158,"current"],[56,163,53,165],[56,164,53,166],[56,168,53,170,"ref"],[56,171,53,173],[56,172,53,174,"current"],[56,179,53,181],[56,180,53,182,"clientHeight"],[56,192,53,194],[56,197,53,199,"ref"],[56,200,53,202],[56,201,53,203,"current"],[56,208,53,210],[56,209,53,211,"scrollHeight"],[56,221,53,223],[57,6,54,8],[57,10,54,12,"shouldLoadMore"],[57,24,54,26],[57,26,54,28],[58,8,55,12,"isLoadingRef"],[58,20,55,24],[58,21,55,25,"current"],[58,28,55,32],[58,31,55,35],[58,35,55,39],[59,8,56,12,"onLoadMore"],[59,18,56,22],[59,23,56,27],[59,27,56,31],[59,31,56,35,"onLoadMore"],[59,41,56,45],[59,46,56,50],[59,51,56,55],[59,52,56,56],[59,55,56,59],[59,60,56,64],[59,61,56,65],[59,64,56,68,"onLoadMore"],[59,74,56,78],[59,75,56,79],[59,76,56,80],[60,6,57,8],[61,6,58,8,"lastItems"],[61,15,58,17],[61,16,58,18,"current"],[61,23,58,25],[61,26,58,28,"items"],[61,31,58,33],[62,4,59,4],[62,5,59,5],[62,7,59,7],[62,8,60,8,"isLoading"],[62,17,60,17],[62,19,61,8,"onLoadMore"],[62,29,61,18],[62,31,62,8,"props"],[62,36,62,13],[62,38,63,8,"ref"],[62,41,63,11],[62,43,64,8,"items"],[62,48,64,13],[62,49,65,5],[62,50,65,6],[63,4,66,4],[64,4,67,4],[65,4,68,4],[66,4,69,4],[66,5,69,5],[66,6,69,6],[66,8,69,8,"$2a8c0bb1629926c8$exports"],[66,33,69,33],[66,34,69,34,"useEvent"],[66,42,69,42],[66,44,69,44,"ref"],[66,47,69,47],[66,49,69,49],[66,57,69,57],[66,59,69,59,"onScroll"],[66,67,69,67],[66,68,69,68],[67,2,70,0],[68,0,70,1],[68,3]],"functionMap":{"names":["<global>","$parcel$export","$parcel$export$argument_2","$faa6ccd6fb62f877$export$7717c92ee915373e","<anonymous>"],"mappings":"AAA;ACK;CDE;8CEE,+CF;AGc;iDCK;KDQ;mDCM;KDgB;CHW"},"hasCjsExports":false},"type":"js/module"}]}